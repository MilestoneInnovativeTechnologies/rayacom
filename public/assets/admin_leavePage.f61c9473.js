import{ai as ee,J as te,r as i,t as x,M as c,P as e,K as s,O as t,ak as ae,R as b,Y as D,L as g,U as K,_ as X,T as n,N as h,ah as F,S as o,as as le,Q as oe,ag as se,al as re,B as ne,X as de,at as ie}from"./index.8ca15aea.js";import{Q as q}from"./QList.428a5f0b.js";import{Q as d}from"./QItemLabel.5771a04c.js";import{Q as f}from"./QBadge.e3c4b0f0.js";import{a as w,Q as u}from"./QItem.444016e9.js";import{Q as ue}from"./QPagination.5d576056.js";import{Q as ce}from"./QSelect.f9d8d8a5.js";import{Q as me}from"./QPage.a0c24181.js";import{C as fe}from"./ClosePopup.555721be.js";import{u as _e}from"./leave.c094466b.js";import{post as ve}from"./axios.871de128.js";import{d as V}from"./date.19ebf348.js";import{u as pe}from"./use-quasar.c67c6e3f.js";import{u as xe}from"./master.e3dfadde.js";import"./format.c860d4da.js";import"./QMenu.057dbcb4.js";import"./position-engine.39984fe0.js";import"./selection.14432526.js";import"./lodash.1e9e3f94.js";const ge=xe(),ye=ge.SALES_EXECUTIVE,J=_e(),ke={setup(){te();const L=pe();let r=i(!1);const v=i(""),a=x(()=>ye),P=x(()=>{if(v.value==="")return Object.values(a.value);{let m=v.value.toLowerCase();return Object.values(a.value).filter(p=>p.name.toLowerCase().indexOf(m)>-1)}}),Y=x(()=>{if(v.value==="")return Object.values(J.leaves).reverse();{let m=v.value.toLowerCase();return Object.values(J.leaves).filter(p=>p.executive.name.toLowerCase().indexOf(m)>-1)}}),l=function(m,p){v.value=m,r.value=!r.value},y=x(()=>Y.value.length);let Q,A;const z=x(()=>(Q=(M.value-1)*k.value,A=(M.value-1)*k.value+k.value,Y.value.slice(Q,A).map(_=>({id:_.id,executive:_.executive.name,start_date:V.formatDate(_.start_date,"MMMM D, YYYY "),end_date:V.formatDate(_.end_date,"MMMM D, YYYY "),description:_.description,status:_.status}))));let I=i(!1),C=i(""),U=i(""),N=i(""),j=i(""),E=i(""),B=i(""),S=i(null);const G=function(m,p,_,Z,$,T){C.value=m,B.value=p,U.value=V.formatDate(_,"DD-MM-YYYY"),N.value=V.formatDate(Z,"DD-MM-YYYY"),j.value=$,T=="New"?(E.value=S.value="Progress",O()):E.value=S.value=T,I.value=!0},O=function(){ve("leave","status",{id:C.value,status:S.value}).then(console.log),R("Leave status updated Successfully")},R=function(m){L.notify({type:"positive",message:m,icon:"cloud_done",position:"top-right",timeout:2e3})};let M=i(1),H=i(1);const k=i(10),W=x(()=>Math.ceil(y.value/k.value));return{totalcount:y,page:M,currentPage:H,totalPages:k,maxVal:W,getData:z,openwindow:G,specificId:C,specificExecutive:B,specificstartDate:U,specificendDate:N,specificeDescription:j,specificStatus:E,card:I,options:["Accepted","Rejected"],model:S,updateStatus:O,positivemsg:R,MYSALESEXECUTIVES:a,search:v,searchExecutives:P,isVisible:r,selectExecutive:l}}},we={class:"dropdown-wrapper"},Qe={key:0,class:"dropdown-popover"},Se={class:"options"},be=["onClick"],De={key:0,class:"q-pa-md row items-start q-gutter-md"},Ve={key:1,class:"q-pa-lg flex flex-center"},Ye={class:"q-pa-md q-gutter-sm"};function Ce(L,r,v,a,P,Y){return s(),c(me,{padding:"",class:"flex column q-col-gutter-y-lg"},{default:e(()=>[t(q,null,{default:e(()=>[t(ae,{modelValue:a.search,"onUpdate:modelValue":r[0]||(r[0]=l=>a.search=l),debounce:"500",filled:"",placeholder:"Search",onClick:r[1]||(r[1]=l=>a.isVisible=!a.isVisible)},{append:e(()=>[t(b,{name:"search"})]),_:1},8,["modelValue"]),D("section",we,[a.isVisible?(s(),g("div",Qe,[D("div",Se,[D("ul",null,[(s(!0),g(K,null,X(a.searchExecutives,(l,y)=>(s(),g("li",{onClick:Q=>a.selectExecutive(l.name,l.id),key:`user-${y}`},n(l.name),9,be))),128))])])])):h("",!0)])]),_:1}),a.totalcount?(s(),g("div",De,[(s(!0),g(K,null,X(a.getData,(l,y)=>(s(),c(F,{flat:"",bordered:"",class:"my-card",key:l.id,onClick:Q=>a.openwindow(l.id,l.executive,l.start_date,l.end_date,l.description,l.status)},{default:e(()=>[t(q,null,{default:e(()=>[t(w,{class:"bg-brand text-white text-bold"},{default:e(()=>[t(u,null,{default:e(()=>[t(d,{class:"text-overline"},{default:e(()=>[o(n(l.executive),1)]),_:2},1024),t(d,{class:"text-subtitle2"},{default:e(()=>[o(n(l.start_date),1)]),_:2},1024),t(d,null,{default:e(()=>[l.status==="New"?(s(),c(f,{key:0,color:"blue"},{default:e(()=>[o(n(l.status),1)]),_:2},1024)):l.status==="Progress"?(s(),c(f,{key:1,color:"secondary"},{default:e(()=>[o(n(l.status),1)]),_:2},1024)):l.status==="Accepted"?(s(),c(f,{key:2,color:"positive"},{default:e(()=>[o(n(l.status),1)]),_:2},1024)):l.status==="Rejected"?(s(),c(f,{key:3,color:"accent"},{default:e(()=>[o(n(l.status),1)]),_:2},1024)):(s(),c(f,{key:4,color:"dark"},{default:e(()=>[o("Unknown")]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):h("",!0),a.totalcount?(s(),g("div",Ve,[t(ue,{modelValue:a.page,"onUpdate:modelValue":r[2]||(r[2]=l=>a.page=l),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"deep-orange-10"},null,8,["modelValue","min","max"])])):h("",!0),D("div",Ye,[t(ie,{modelValue:a.card,"onUpdate:modelValue":r[5]||(r[5]=l=>a.card=l)},{default:e(()=>[t(F,{class:"my-card",style:{"max-width":"400px"}},{default:e(()=>[t(q,{bordered:"",class:"rounded-borders"},{default:e(()=>[t(w,null,{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(le,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{lines:"1"},{default:e(()=>[o(n(a.specificExecutive),1)]),_:1}),t(d,{lines:"2"}),t(d,{caption:"",lines:"3"},{default:e(()=>[o(n(a.specificId),1)]),_:1})]),_:1}),t(u,{side:""},{default:e(()=>[a.model==="New"?(s(),c(f,{key:0,color:"blue"},{default:e(()=>[o(n(a.model),1)]),_:1})):a.model==="Progress"?(s(),c(f,{key:1,color:"secondary"},{default:e(()=>[o(n(a.model),1)]),_:1})):a.model==="Accepted"?(s(),c(f,{key:2,color:"positive"},{default:e(()=>[o(n(a.model),1)]),_:1})):a.model==="Rejected"?(s(),c(f,{key:3,color:"negative"},{default:e(()=>[o(n(a.model),1)]),_:1})):(s(),c(f,{key:4,color:"primary"},{default:e(()=>[o("Unknown")]),_:1}))]),_:1})]),_:1}),t(oe),t(w,null,{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(d,null,{default:e(()=>[t(b,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[o("Start Date")]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[o(n(a.specificstartDate),1)]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(d,null,{default:e(()=>[t(b,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[o("End Date")]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[o(n(a.specificendDate),1)]),_:1})]),_:1})]),_:1}),t(w,null,{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(d,null,{default:e(()=>[t(b,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[o("Description")]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[o(n(a.specificeDescription),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(se,null,{default:e(()=>[t(ce,{filled:"",modelValue:a.model,"onUpdate:modelValue":[r[3]||(r[3]=l=>a.model=l),r[4]||(r[4]=l=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1}),t(re,{align:"right"},{default:e(()=>[ne(t(de,{flat:"",label:"Close",color:"negative"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ze=ee(ke,[["render",Ce],["__scopeId","data-v-450e8b94"]]);export{ze as default};
