import{Q as d}from"./QItemLabel.2807a71a.js";import{_ as T,f as V,r as n,K as c,O as r,N as e,X as x,M as t,L as w,Y as I,B as Y,ar as M,R as s,S as o,T as O,P as B,W as F,aC as H}from"./index.01a4d7f9.js";import{b as N,a as p,Q as u}from"./QList.ea411345.js";import{Q as i}from"./QBadge.98ea94b1.js";import{Q as W}from"./QPagination.4513213a.js";import{Q as R}from"./use-prevent-scroll.6331d8db.js";import{d as X,Q as j,a as z,C as G}from"./ClosePopup.5f0da1f4.js";import{Q as J}from"./QCard.c6908caf.js";import{Q as Z}from"./QPage.5a5bbeae.js";import{u as $}from"./order.2728bd89.js";import"./master.02c82b39.js";import"./axios.055b09b4.js";import"./use-dark.7da541fb.js";import"./QInput.16cb8938.js";import"./format.c860d4da.js";import"./lodash.e6c87188.js";const ee=$(),te={setup(){let g,f;const S=V(()=>ee.all.reverse());let l=n(S.value),Q=Object.values(l.value).length;const q=V(()=>{g=(h.value-1)*y.value,f=(h.value-1)*y.value+y.value;let k=l.value.slice(g,f).map(m=>({id:m.id,date:X.formatDate(m.date,"MMMM d, YYYY "),customer:m.customer.name,narration:m.narration,status:m.status,items:m.items}));return console.log(k),k});let a=n(!1),_=n(""),v=n(""),b=n(""),C=n(""),D=n("");const A=function(P,k,m,U,K){v.value=P,_.value=U,b.value=k,C.value=m,D.value=K,a.value=!0};let h=n(1),E=n(1),L=n(null);const y=n(5);return{MYORDERS:l,totalcount:Q,page:h,currentPage:E,nextPage:L,totalPages:y,getOrders:q,showitems:A,specificItems:_,specificId:v,specificDate:b,specificStatus:C,specificCustomer:D,card:a}}},ae={class:"q-pa-md q-gutter-md"},le=s("Order History"),se=s("Unknown"),oe={key:0,class:"q-pa-lg flex flex-center"},ce={class:"q-pa-md q-gutter-sm"},re={class:"text-weight-bold"},de=s("Unknown"),ie=s("#"),ue=s("Item"),ne=s("Quantity"),me=s("Total Items");function fe(g,f,S,l,Q,q){return c(),r(Z,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:e(()=>[x("div",ae,[l.totalcount?(c(),r(N,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{"max-width":"350px"}},{default:e(()=>[t(d,{header:""},{default:e(()=>[le]),_:1}),(c(!0),w(O,null,I(l.getOrders,(a,_)=>Y((c(),r(p,{clickable:"",key:a.id,onClick:v=>l.showitems(a.id,a.date,a.status,a.items,a.customer)},{default:e(()=>[t(u,{avatar:"",top:""},{default:e(()=>[t(M,{icon:"fact_check",color:"deep-orange-10","text-color":"white"})]),_:1}),t(u,null,{default:e(()=>[t(d,{lines:"1"},{default:e(()=>[s(o(a.id),1)]),_:2},1024),t(d,null,{default:e(()=>[s(o(a.customer),1)]),_:2},1024),t(d,{caption:""},{default:e(()=>[s(o(a.date),1)]),_:2},1024)]),_:2},1024),t(u,null,{default:e(()=>[t(d,{caption:""},{default:e(()=>[s(o(a.narration),1)]),_:2},1024)]),_:2},1024),t(u,{side:""},{default:e(()=>[a.status==="New"?(c(),r(i,{key:0,color:"blue"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):a.status==="Viewed"?(c(),r(i,{key:1,color:"secondary"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):a.status==="Accepted"?(c(),r(i,{key:2,color:"accent"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):a.status==="Packed"?(c(),r(i,{key:3,color:"info"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):a.status==="Dispatched"?(c(),r(i,{key:4,color:"blue-grey"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):a.status==="Delivered"?(c(),r(i,{key:5,color:"positive"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):a.status==="Cancelled"?(c(),r(i,{key:6,color:"negative"},{default:e(()=>[s(o(a.status),1)]),_:2},1024)):(c(),r(i,{key:7,color:"primary"},{default:e(()=>[se]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[H]])),128))]),_:1})):B("",!0)]),l.totalcount?(c(),w("div",oe,[t(W,{modelValue:l.page,"onUpdate:modelValue":f[0]||(f[0]=a=>l.page=a),min:l.currentPage,max:Math.ceil(l.totalcount/l.totalPages),"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"deep-orange-10"},null,8,["modelValue","min","max"])])):B("",!0),x("div",ce,[t(z,{modelValue:l.card,"onUpdate:modelValue":f[1]||(f[1]=a=>l.card=a)},{default:e(()=>[t(J,{class:"my-card",style:{width:"400px"}},{default:e(()=>[t(N,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:e(()=>[t(p,null,{default:e(()=>[t(u,{avatar:""},{default:e(()=>[t(M,{icon:"fact_check",color:"deep-orange-10","text-color":"white"})]),_:1}),t(u,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{lines:"1"},{default:e(()=>[s(o(l.specificDate),1)]),_:1}),t(d,{lines:"1"},{default:e(()=>[s(o(l.specificCustomer),1)]),_:1}),t(d,{caption:"",lines:"2"},{default:e(()=>[x("span",re,o(l.specificId),1)]),_:1}),t(d,{caption:"",lines:"1"},{default:e(()=>[l.specificStatus==="New"?(c(),r(i,{key:0,color:"blue"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):l.specificStatus==="Viewed"?(c(),r(i,{key:1,color:"secondary"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):l.specificStatus==="Accepted"?(c(),r(i,{key:2,color:"accent"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):l.specificStatus==="Packed"?(c(),r(i,{key:3,color:"info"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):g.model==="Dispatched"?(c(),r(i,{key:4,color:"blue-grey"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):l.specificStatus==="Delivered"?(c(),r(i,{key:5,color:"positive"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):l.specificStatus==="Cancelled"?(c(),r(i,{key:6,color:"negative"},{default:e(()=>[s(o(l.specificStatus),1)]),_:1})):(c(),r(i,{key:7,color:"primary"},{default:e(()=>[de]),_:1}))]),_:1})]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(u,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[ie]),_:1})]),_:1}),t(u,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[ue]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[ne]),_:1})]),_:1})]),_:1}),t(R),(c(!0),w(O,null,I(l.specificItems,(a,_)=>(c(),r(p,null,{default:e(()=>[t(u,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[s(o(_+1),1)]),_:2},1024)]),_:2},1024),t(u,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[s(o(a.item.name),1)]),_:2},1024)]),_:2},1024),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[s(o(a.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),t(R),t(p,null,{default:e(()=>[t(u,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(u,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[me]),_:1})]),_:1}),t(u,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[s(o(l.specificItems.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(j,{align:"right"},{default:e(()=>[Y(t(F,{flat:"",label:"Close",color:"negative"},null,512),[[G]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Ve=T(te,[["render",fe]]);export{Ve as default};
