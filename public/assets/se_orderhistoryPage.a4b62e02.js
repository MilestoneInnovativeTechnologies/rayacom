import{a as K,Q as L}from"./QToolbar.080a901a.js";import{a8 as R,k as S,r as n,E as c,H as t,C as r,D as h,G as e,K as P,P as V,t as I,ap as M,I as l,J as s,F as Y,N as F,M as H,aq as G}from"./index.519e6511.js";import{a as p,Q as u}from"./QItem.dbe0fd3c.js";import{Q as i}from"./QItemLabel.95c271f7.js";import{Q as d}from"./QBadge.a3efd72d.js";import{Q as N}from"./QList.ee2f0220.js";import{Q as J}from"./QPagination.908aa05f.js";import{Q as A}from"./QSeparator.8305d860.js";import{Q as j}from"./QCardActions.2803e26a.js";import{Q as z}from"./QCard.39c5907a.js";import{Q as W}from"./QDialog.4aa07f16.js";import{Q as X}from"./QPage.68727071.js";import{C as Z}from"./ClosePopup.20672703.js";import{u as $}from"./order.3b2eb02b.js";import{d as tt}from"./date.bd456e4c.js";import"./master.8d9550d1.js";import"./axios.98808b05.js";import"./use-dark.e60f4681.js";import"./QInput.3be0fd5f.js";import"./format.c860d4da.js";import"./use-prevent-scroll.d8f1a98f.js";import"./scroll.1e188d5c.js";import"./use-model-toggle.02b9d1d7.js";import"./use-portal.0839ed11.js";import"./lodash.1b69ab06.js";const et=$(),at={setup(){let g,f;const v=S(()=>et.all.reverse()),o=S(()=>Object.keys(v.value).length),b=S(()=>{g=(Q.value-1)*y.value,f=(Q.value-1)*y.value+y.value;let k=v.value.slice(g,f).map(m=>({id:m.id,date:tt.formatDate(m.date,"MMMM D, YYYY "),customer:m.customer.name,narration:m.narration,status:m.status,items:m.items}));return console.log(k),k});let x=n(!1),a=n(""),_=n(""),w=n(""),q=n(""),C=n("");const B=function(D,k,m,T,U){_.value=D,a.value=T,w.value=k,q.value=m,C.value=U,x.value=!0};let Q=n(1),O=n(1),E=n(null);const y=n(5);return{MYORDERS:v,totalcount:o,page:Q,currentPage:O,nextPage:E,totalPages:y,getOrders:b,showitems:B,specificItems:a,specificId:_,specificDate:w,specificStatus:q,specificCustomer:C,card:x}}},lt={key:0,class:"q-pa-md",style:{width:"80vw","max-width":"350px"}},ot=l("Order History"),st=l("Unknown"),rt={key:1,class:"q-pa-lg flex flex-center"},ct={class:"q-pa-md q-gutter-sm"},dt=l("Unknown"),it=l("#"),ut=l("Item"),nt=l("Quantity"),mt=l("\xA0"),ft=l("Total Items");function _t(g,f,v,o,b,x){return r(),c(X,{padding:"",class:"flex-center column q-col-gutter-y-lg"},{default:t(()=>[o.totalcount?(r(),h("div",lt,[e(L,{class:"bg-brand text-white shadow-2"},{default:t(()=>[e(K,null,{default:t(()=>[ot]),_:1})]),_:1}),e(N,{bordered:"",padding:"",class:"rounded-borders"},{default:t(()=>[(r(!0),h(P,null,V(o.getOrders,(a,_)=>I((r(),c(p,{clickable:"",key:a.id,onClick:w=>o.showitems(a.id,a.date,a.status,a.items,a.customer)},{default:t(()=>[e(u,{avatar:"",top:""},{default:t(()=>[e(M,{color:"brand","text-color":"white"},{default:t(()=>[l(s(a.customer.charAt(0)),1)]),_:2},1024)]),_:2},1024),e(u,null,{default:t(()=>[e(i,null,{default:t(()=>[l(s(a.customer),1)]),_:2},1024),e(i,{caption:""},{default:t(()=>[l(s(a.date),1)]),_:2},1024),e(i,{caption:""},{default:t(()=>[l(s(a.narration),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:t(()=>[a.status==="New"?(r(),c(d,{key:0,color:"blue"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):a.status==="Viewed"?(r(),c(d,{key:1,color:"secondary"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):a.status==="Accepted"?(r(),c(d,{key:2,color:"accent"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):a.status==="Packed"?(r(),c(d,{key:3,color:"info"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):a.status==="Dispatched"?(r(),c(d,{key:4,color:"blue-grey"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):a.status==="Delivered"?(r(),c(d,{key:5,color:"positive"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):a.status==="Cancelled"?(r(),c(d,{key:6,color:"negative"},{default:t(()=>[l(s(a.status),1)]),_:2},1024)):(r(),c(d,{key:7,color:"primary"},{default:t(()=>[st]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[G]])),128))]),_:1})])):Y("",!0),o.totalcount?(r(),h("div",rt,[e(J,{modelValue:o.page,"onUpdate:modelValue":f[0]||(f[0]=a=>o.page=a),min:o.currentPage,max:Math.ceil(o.totalcount/o.totalPages),"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):Y("",!0),F("div",ct,[e(W,{modelValue:o.card,"onUpdate:modelValue":f[1]||(f[1]=a=>o.card=a)},{default:t(()=>[e(z,{class:"my-card",style:{width:"400px"}},{default:t(()=>[e(N,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:t(()=>[e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(M,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(u,{top:""},{default:t(()=>[e(i,{lines:"1"},{default:t(()=>[l(s(o.specificCustomer),1)]),_:1}),e(i,{lines:"1"},{default:t(()=>[l(s(o.specificDate),1)]),_:1}),e(i,{side:""},{default:t(()=>[o.specificStatus==="New"?(r(),c(d,{key:0,color:"blue"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):o.specificStatus==="Viewed"?(r(),c(d,{key:1,color:"secondary"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):o.specificStatus==="Accepted"?(r(),c(d,{key:2,color:"accent"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):o.specificStatus==="Packed"?(r(),c(d,{key:3,color:"info"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):g.model==="Dispatched"?(r(),c(d,{key:4,color:"blue-grey"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):o.specificStatus==="Delivered"?(r(),c(d,{key:5,color:"positive"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):o.specificStatus==="Cancelled"?(r(),c(d,{key:6,color:"negative"},{default:t(()=>[l(s(o.specificStatus),1)]),_:1})):(r(),c(d,{key:7,color:"primary"},{default:t(()=>[dt]),_:1}))]),_:1})]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(i,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[it]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(i,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[ut]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(i,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[nt]),_:1})]),_:1})]),_:1}),e(A),(r(!0),h(P,null,V(o.specificItems,(a,_)=>(r(),c(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(i,{class:"q-mt-sm"},{default:t(()=>[l(s(_+1),1)]),_:2},1024)]),_:2},1024),e(u,{top:""},{default:t(()=>[e(i,{class:"q-mt-sm"},{default:t(()=>[l(s(a.item.name),1)]),_:2},1024)]),_:2},1024),e(u,{top:""},{default:t(()=>[e(i,{class:"q-mt-sm flex-center text-center"},{default:t(()=>[l(s(a.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),e(A),e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(i,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[mt]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(i,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[ft]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(i,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[l(s(o.specificItems.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{align:"right"},{default:t(()=>[I(e(H,{flat:"",label:"Close",color:"negative"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Ut=R(at,[["render",_t]]);export{Ut as default};
