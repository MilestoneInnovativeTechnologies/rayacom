import{a as Z,Q as $}from"./QToolbar.692181af.js";import{a8 as ee,B as te,k as v,r as f,E as c,H as e,C as r,N as V,G as t,D,P as E,t as R,ap as T,I as o,J as s,K as U,F as L,M as ae,aq as le}from"./index.8d7e61fd.js";import{a as _,Q as i}from"./QItem.d2090226.js";import{Q as d}from"./QItemLabel.4b045cb7.js";import{Q as n}from"./QBadge.68cbc97a.js";import{Q as F}from"./QList.5e2b7bfb.js";import{Q as oe}from"./QPagination.2286f097.js";import{Q as K}from"./QSeparator.1fdea069.js";import{Q as se}from"./QSelect.a4017f62.js";import{Q as re}from"./QCardActions.dacc32d4.js";import{Q as de}from"./QCard.9e71421a.js";import{Q as ce}from"./QDialog.500a4fb3.js";import{Q as ie}from"./QPage.12dd21c8.js";import{C as me}from"./ClosePopup.77ae0838.js";import{u as ne}from"./use-quasar.7d209305.js";import{u as ue}from"./order.2c304010.js";import{d as fe}from"./date.52e73b47.js";import{post as _e}from"./axios.980293f3.js";import"./use-dark.678b0dd2.js";import"./QInput.0fdaf5de.js";import"./format.c860d4da.js";import"./QMenu.f3a6a76b.js";import"./position-engine.fd7b7ee1.js";import"./selection.4ec6e38e.js";import"./use-portal.0314865a.js";import"./scroll.25b4c155.js";import"./use-model-toggle.3fd02ce3.js";import"./use-prevent-scroll.1269f3f5.js";import"./master.58f94054.js";import"./lodash.1b69ab06.js";const pe=ue(),ge={setup(){const C=te(),u=ne();let h,a,w;const p=v(()=>pe.all),l=v(()=>{let m=[];for(let y in p.value)h=p.value[y].status,h!="Delivered"&&h!="Cancelled"&&m.push(p.value[y]);return m.reverse()}),g=v(()=>Object.keys(l.value).length);let Q,S,k=f(null);const j=v(()=>(a=(B.value-1)*x.value,w=a+x.value,Q=Object.values(l.value).slice(a,w),S=Q.map(m=>(m.status,{id:m.id,date:fe.formatDate(m.date,"MMMM d, YYYY "),narration:m.narration,customer:m.customer.name,status:m.status,items:m.items})),S)),G=function(){C.push({name:"ITEM"})},I=function(){_e("order","status",{order:b.value,status:k.value}).then(console.log),A("Order status updated Successfully")};let P=f(!1),M=f(""),N=f(""),b=f(""),O=f(""),q=f("");const H=function(m,y,W,Y,X){N.value=m,b.value=y,M.value=X,O.value=W,Y=="New"?(q.value=k.value="Viewed",I()):q.value=k.value=Y,P.value=!0},A=function(m){u.notify({type:"positive",message:m,icon:"cloud_done",position:"top-right",timeout:1e3})};let B=f(1),J=f(1);const x=f(5),z=v(()=>Math.ceil(g.value/x.value));return{ORDERS:p,MYORDERS:l,totalcount:g,page:B,currentPage:J,totalPages:x,maxVal:z,getOrders:j,gotoItempage:G,showitems:H,specificItems:M,specificId:b,specificCustomer:N,specificDate:O,specificStatus:q,card:P,model:k,options:["Accepted","Packed","Dispatched","Delivered","Cancelled"],updateStatus:I,positivemsg:A}}},ve={class:"q-pa-md"},he=o("Dashboard"),ke=o("Unknown"),xe={key:0,class:"q-pa-lg flex flex-center"},ye={class:"q-pa-md q-gutter-sm"},we={class:"text-weight-bold"},Qe=o("Unknown"),be=o("#"),qe=o("Item"),Ve=o("Quantity"),De=o("Total Items");function Ce(C,u,h,a,w,p){return r(),c(ie,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:e(()=>[V("div",ve,[t($,{class:"bg-brand text-white shadow-2"},{default:e(()=>[t(Z,null,{default:e(()=>[he]),_:1})]),_:1}),a.totalcount?(r(),c(F,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{"max-width":"350px"}},{default:e(()=>[(r(!0),D(U,null,E(a.getOrders,(l,g)=>R((r(),c(_,{clickable:"",key:l.id,onClick:Q=>a.showitems(l.customer,l.id,l.date,l.status,l.items)},{default:e(()=>[t(i,{avatar:"",top:""},{default:e(()=>[t(T,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(i,null,{default:e(()=>[t(d,{lines:"1"},{default:e(()=>[o(s(l.customer),1)]),_:2},1024),t(d,{lines:"1"},{default:e(()=>[o(s(l.id),1)]),_:2},1024),t(d,{caption:""},{default:e(()=>[o(s(l.date),1)]),_:2},1024),t(d,{caption:""},{default:e(()=>[o(s(l.narration),1)]),_:2},1024)]),_:2},1024),t(i,{side:"",top:""},{default:e(()=>[l.status==="New"?(r(),c(n,{key:0,color:"blue"},{default:e(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Viewed"?(r(),c(n,{key:1,color:"secondary"},{default:e(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Accepted"?(r(),c(n,{key:2,color:"accent"},{default:e(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Packed"?(r(),c(n,{key:3,color:"info"},{default:e(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Dispatched"?(r(),c(n,{key:4,color:"blue-grey"},{default:e(()=>[o(s(l.status),1)]),_:2},1024)):(r(),c(n,{key:5,color:"primary"},{default:e(()=>[ke]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[le]])),128))]),_:1})):L("",!0)]),a.totalcount?(r(),D("div",xe,[t(oe,{modelValue:a.page,"onUpdate:modelValue":u[0]||(u[0]=l=>a.page=l),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):L("",!0),V("div",ye,[t(ce,{modelValue:a.card,"onUpdate:modelValue":u[3]||(u[3]=l=>a.card=l)},{default:e(()=>[t(de,{class:"my-card",style:{width:"400px"}},{default:e(()=>[t(F,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:e(()=>[t(_,null,{default:e(()=>[t(i,{avatar:""},{default:e(()=>[t(T,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(i,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{lines:"1"},{default:e(()=>[o(s(a.specificCustomer),1)]),_:1}),t(d,{lines:"2"},{default:e(()=>[o(s(a.specificDate),1)]),_:1}),t(d,{caption:"",lines:"3"},{default:e(()=>[V("span",we,s(a.specificId),1)]),_:1})]),_:1}),t(i,{side:""},{default:e(()=>[a.model==="New"?(r(),c(n,{key:0,color:"blue"},{default:e(()=>[o(s(a.model),1)]),_:1})):a.model==="Viewed"?(r(),c(n,{key:1,color:"secondary"},{default:e(()=>[o(s(a.model),1)]),_:1})):a.model==="Accepted"?(r(),c(n,{key:2,color:"accent"},{default:e(()=>[o(s(a.model),1)]),_:1})):a.model==="Packed"?(r(),c(n,{key:3,color:"info"},{default:e(()=>[o(s(a.model),1)]),_:1})):a.model==="Dispatched"?(r(),c(n,{key:4,color:"blue-grey"},{default:e(()=>[o(s(a.model),1)]),_:1})):a.model==="Delivered"?(r(),c(n,{key:5,color:"positive"},{default:e(()=>[o(s(a.model),1)]),_:1})):a.model==="Cancelled"?(r(),c(n,{key:6,color:"negative"},{default:e(()=>[o(s(a.model),1)]),_:1})):(r(),c(n,{key:7,color:"primary"},{default:e(()=>[Qe]),_:1}))]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[be]),_:1})]),_:1}),t(i,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[qe]),_:1})]),_:1}),t(i,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[Ve]),_:1})]),_:1})]),_:1}),t(K),(r(!0),D(U,null,E(a.specificItems,(l,g)=>(r(),c(_,null,{default:e(()=>[t(i,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[o(s(g+1),1)]),_:2},1024)]),_:2},1024),t(i,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm"},{default:e(()=>[o(s(l.item.name),1)]),_:2},1024)]),_:2},1024),t(i,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[o(s(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),t(K),t(_,null,{default:e(()=>[t(i,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(i,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[De]),_:1})]),_:1}),t(i,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[o(s(a.specificItems.length),1)]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(i,{top:"",class:"col-2 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(i,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(d,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[t(se,{filled:"",modelValue:a.model,"onUpdate:modelValue":[u[1]||(u[1]=l=>a.model=l),u[2]||(u[2]=l=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(i,{top:""},{default:e(()=>[t(d,{class:"q-mt-sm"})]),_:1})]),_:1})]),_:1}),t(re,{align:"right"},{default:e(()=>[R(t(ae,{flat:"",label:"Close",color:"negative"},null,512),[[me]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var st=ee(ge,[["render",Ce]]);export{st as default};
