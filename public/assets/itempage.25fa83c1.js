import{a8 as A,r as i,B as K,k as l,D as m,N as S,G as d,H as u,K as V,P as U,F as f,M as G,C as s,Q as F,E as C,I as M,J as I}from"./index.519e6511.js";import{Q as H}from"./QInput.3be0fd5f.js";import{Q as J}from"./QTooltip.6ce96193.js";import{Q as z}from"./QItemLabel.95c271f7.js";import{Q as W}from"./QCardSection.a10ea186.js";import{Q as X}from"./QCard.39c5907a.js";import{Q as Z}from"./QPagination.908aa05f.js";import{u as $}from"./use-quasar.c19bc2e1.js";import{u as ee}from"./offers.70c3b81f.js";import{u as te}from"./master.8d9550d1.js";import"./use-dark.e60f4681.js";import"./format.c860d4da.js";import"./position-engine.6301699e.js";import"./selection.e65ce004.js";import"./use-portal.0839ed11.js";import"./scroll.1e188d5c.js";import"./use-model-toggle.02b9d1d7.js";import"./lodash.1b69ab06.js";const p=ee(),ae=te();i(AUTH_DATA);const re={setup(){const O=$(),r=K(),o=i([]);let t,b;const v=i(""),a=l(()=>ae.ITEM),E=l(()=>Object.values(p.offers).map(e=>e.item.id));let w={};const _=l(()=>{for(let e in p.offers)w[p.offers[e].item.id]={min_qty:p.offers[e].minimum_quantity,offer_qty:p.offers[e].offer_quantity};return w}),k=l(()=>{if(v.value==="")return Object.values(a.value);{let e=v.value.toLowerCase();return Object.values(a.value).filter(g=>g.item.name.toLowerCase().indexOf(e)>-1)}}),L=l(()=>k.value.length),Y=l(()=>(t=(Q.value-1)*y.value,b=(Q.value-1)*y.value+y.value,k.value.slice(t,b).map(c=>c))),B=function(e,g){var c="",h=0,q=0,x=0;_.value[e]&&(q=_.value[e].min_qty,h=_.value[e].offer_qty);var D=o.value.some(function(n){return n.item===e});if(!D)x=parseInt(1/q*h),o.value.push({item:e,itemname:g,min_qty:q,offer_qty:h,foc:x,quantity:1}),c="New item added";else{o.value.find(n=>n.item===e).quantity+=1;var T=o.value.find(n=>n.item===e).quantity;x=parseInt(T/q*h),o.value.find(n=>n.item===e).foc=x,c="Item quantity updated"}P(c)},P=function(e){O.notify({type:"positive",icon:"cloud_done",message:e,position:"top-right",timeout:800})},N=function(){var e=JSON.stringify(o.value);r.push({name:"ORDER",state:{products:e}})};let Q=i(1),R=i(1),j=i(null);const y=i(10);return{MYOFFERS:E,MYITEMS:a,search:v,searchResult:k,myitemsLength:L,page:Q,currentPage:R,nextPage:j,totalPages:y,getData:Y,positivemsg:P,myproducts:o,selectedProducts:B,order:N,newobj:_}}},oe={class:"q-pa-md fullwidth"},se={class:"q-gutter-md"},ne={key:0,class:"q-pa-md row items-start q-gutter-md"},ie={class:"Subtitle 2 text-weight-bolder"},le=M("Offered Item"),de={key:1,class:"q-pa-lg flex flex-center"},ue={key:2,class:"q-pa-md q-gutter-sm"};function ce(O,r,o,t,b,v){return s(),m(V,null,[S("div",oe,[S("div",se,[d(H,{modelValue:t.search,"onUpdate:modelValue":r[0]||(r[0]=a=>t.search=a),debounce:"500",filled:"",placeholder:"Search"},{append:u(()=>[d(F,{name:"search"})]),_:1},8,["modelValue"])])]),t.myitemsLength?(s(),m("div",ne,[(s(!0),m(V,null,U(t.getData,(a,E)=>(s(),C(X,{flat:"",bordered:"",class:"my-card",key:a.id,onClick:w=>t.selectedProducts(a.id,a.name)},{default:u(()=>[d(W,{class:"bg-brand text-white"},{default:u(()=>[S("div",ie,[M(I(a.name)+" ",1),t.MYOFFERS.includes(a.id)?(s(),C(F,{key:0,name:"star",color:"yellow",label:"offer",size:"1rem",style:{"border-right":"#F2C037"}},{default:u(()=>[d(J,null,{default:u(()=>[le]),_:1})]),_:1})):f("",!0),t.MYOFFERS.includes(a.id)?(s(),C(z,{key:1,class:"text-subtitle2"},{default:u(()=>[M(" Buy: "+I(t.newobj[a.id].min_qty)+" \xA0 Get: "+I(t.newobj[a.id].offer_qty),1)]),_:2},1024)):f("",!0)])]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):f("",!0),t.myitemsLength?(s(),m("div",de,[d(Z,{modelValue:t.page,"onUpdate:modelValue":r[1]||(r[1]=a=>t.page=a),min:t.currentPage,max:Math.ceil(t.myitemsLength/t.totalPages),"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):f("",!0),t.myproducts.length?(s(),m("div",ue,[d(G,{unelevated:"",rounded:"",color:"positive",label:"Proceed","icon-right":"send",class:"full-width",onClick:r[2]||(r[2]=a=>t.order())})])):f("",!0)],64)}var Oe=A(re,[["render",ce],["__scopeId","data-v-dfac1bac"]]);export{Oe as default};
