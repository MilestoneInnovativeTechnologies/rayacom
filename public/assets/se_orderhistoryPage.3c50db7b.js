import{a as L,Q as F}from"./QToolbar.1bf24825.js";import{a8 as H,k as P,r as n,E as c,H as t,C as o,N as V,G as e,D as x,P as I,t as M,ap as Y,I as s,J as r,K as N,F as O,M as G,aq as J}from"./index.246a4b9a.js";import{a as p,Q as u}from"./QItem.899e600d.js";import{Q as d}from"./QItemLabel.e6fa0dc1.js";import{Q as i}from"./QBadge.fbb9c512.js";import{Q as B}from"./QList.36addd93.js";import{Q as j}from"./QPagination.7c56899a.js";import{Q as E}from"./QSeparator.265b03cf.js";import{Q as z}from"./QCardActions.dab7d62d.js";import{Q as W}from"./QCard.fc586c7a.js";import{Q as X}from"./QDialog.731c9919.js";import{Q as Z}from"./QPage.d4defc19.js";import{C as $}from"./ClosePopup.7f3f20ff.js";import{u as tt}from"./order.ffac0f74.js";import{d as et}from"./date.fd5a70cf.js";import"./master.9f86e441.js";import"./axios.93d508e0.js";import"./use-dark.b88f123a.js";import"./QInput.19c0c42c.js";import"./format.c860d4da.js";import"./use-prevent-scroll.b4d5fbe2.js";import"./scroll.606ee28b.js";import"./use-model-toggle.4c9c2223.js";import"./use-portal.f505e8fd.js";import"./lodash.1e9e3f94.js";const at=tt(),lt={setup(){let g,f;const w=P(()=>at.all.reverse());let l=n(w.value),Q=Object.values(l.value).length;const S=P(()=>{g=(h.value-1)*k.value,f=(h.value-1)*k.value+k.value;let v=l.value.slice(g,f).map(m=>({id:m.id,date:et.formatDate(m.date,"MMMM D, YYYY "),customer:m.customer.name,narration:m.narration,status:m.status,items:m.items}));return console.log(v),v});let a=n(!1),_=n(""),y=n(""),b=n(""),q=n(""),C=n("");const A=function(D,v,m,U,K){y.value=D,_.value=U,b.value=v,q.value=m,C.value=K,a.value=!0};let h=n(1),R=n(1),T=n(null);const k=n(5);return{MYORDERS:l,totalcount:Q,page:h,currentPage:R,nextPage:T,totalPages:k,getOrders:S,showitems:A,specificItems:_,specificId:y,specificDate:b,specificStatus:q,specificCustomer:C,card:a}}},st={class:"q-pa-md",style:{width:"80vw","max-width":"350px"}},ot=s("Order History"),rt=s("Unknown"),ct={key:0,class:"q-pa-lg flex flex-center"},it={class:"q-pa-md q-gutter-sm"},dt=s("Unknown"),ut=s("#"),nt=s("Item"),mt=s("Quantity"),ft=s("Total Items");function _t(g,f,w,l,Q,S){return o(),c(Z,{padding:"",class:"flex-center column q-col-gutter-y-lg"},{default:t(()=>[V("div",st,[e(F,{class:"bg-brand text-white shadow-2"},{default:t(()=>[e(L,null,{default:t(()=>[ot]),_:1})]),_:1}),l.totalcount?(o(),c(B,{key:0,bordered:"",padding:"",class:"rounded-borders"},{default:t(()=>[(o(!0),x(N,null,I(l.getOrders,(a,_)=>M((o(),c(p,{clickable:"",key:a.id,onClick:y=>l.showitems(a.id,a.date,a.status,a.items,a.customer)},{default:t(()=>[e(u,{avatar:"",top:""},{default:t(()=>[e(Y,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(u,null,{default:t(()=>[e(d,null,{default:t(()=>[s(r(a.customer),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[s(r(a.date),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[s(r(a.narration),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:t(()=>[a.status==="New"?(o(),c(i,{key:0,color:"blue"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):a.status==="Viewed"?(o(),c(i,{key:1,color:"secondary"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):a.status==="Accepted"?(o(),c(i,{key:2,color:"accent"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):a.status==="Packed"?(o(),c(i,{key:3,color:"info"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):a.status==="Dispatched"?(o(),c(i,{key:4,color:"blue-grey"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):a.status==="Delivered"?(o(),c(i,{key:5,color:"positive"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):a.status==="Cancelled"?(o(),c(i,{key:6,color:"negative"},{default:t(()=>[s(r(a.status),1)]),_:2},1024)):(o(),c(i,{key:7,color:"primary"},{default:t(()=>[rt]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[J]])),128))]),_:1})):O("",!0)]),l.totalcount?(o(),x("div",ct,[e(j,{modelValue:l.page,"onUpdate:modelValue":f[0]||(f[0]=a=>l.page=a),min:l.currentPage,max:Math.ceil(l.totalcount/l.totalPages),"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):O("",!0),V("div",it,[e(X,{modelValue:l.card,"onUpdate:modelValue":f[1]||(f[1]=a=>l.card=a)},{default:t(()=>[e(W,{class:"my-card",style:{width:"400px"}},{default:t(()=>[e(B,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:t(()=>[e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(Y,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[s(r(l.specificCustomer),1)]),_:1}),e(d,{lines:"1"},{default:t(()=>[s(r(l.specificDate),1)]),_:1}),e(d,{side:""},{default:t(()=>[l.specificStatus==="New"?(o(),c(i,{key:0,color:"blue"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):l.specificStatus==="Viewed"?(o(),c(i,{key:1,color:"secondary"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):l.specificStatus==="Accepted"?(o(),c(i,{key:2,color:"accent"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):l.specificStatus==="Packed"?(o(),c(i,{key:3,color:"info"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):g.model==="Dispatched"?(o(),c(i,{key:4,color:"blue-grey"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):l.specificStatus==="Delivered"?(o(),c(i,{key:5,color:"positive"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):l.specificStatus==="Cancelled"?(o(),c(i,{key:6,color:"negative"},{default:t(()=>[s(r(l.specificStatus),1)]),_:1})):(o(),c(i,{key:7,color:"primary"},{default:t(()=>[dt]),_:1}))]),_:1})]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(u,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[ut]),_:1})]),_:1}),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[nt]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[mt]),_:1})]),_:1})]),_:1}),e(E),(o(!0),x(N,null,I(l.specificItems,(a,_)=>(o(),c(p,null,{default:t(()=>[e(u,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm"},{default:t(()=>[s(r(_+1),1)]),_:2},1024)]),_:2},1024),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm"},{default:t(()=>[s(r(a.item.name),1)]),_:2},1024)]),_:2},1024),e(u,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm flex-center text-center"},{default:t(()=>[s(r(a.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),e(E),e(p,null,{default:t(()=>[e(u,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[ft]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[s(r(l.specificItems.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(z,{align:"right"},{default:t(()=>[M(e(G,{flat:"",label:"Close",color:"negative"},null,512),[[$]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Tt=H(lt,[["render",_t]]);export{Tt as default};
