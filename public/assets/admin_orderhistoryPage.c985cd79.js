import{a as K,Q as L}from"./QToolbar.692181af.js";import{a8 as F,k as I,r as n,E as c,H as t,C as r,N as x,G as e,D as w,P,t as M,ap as Y,I as l,J as o,K as N,F as O,M as H,aq as G}from"./index.8d7e61fd.js";import{a as p,Q as u}from"./QItem.d2090226.js";import{Q as d}from"./QItemLabel.4b045cb7.js";import{Q as i}from"./QBadge.68cbc97a.js";import{Q as B}from"./QList.5e2b7bfb.js";import{Q as J}from"./QPagination.2286f097.js";import{Q as E}from"./QSeparator.1fdea069.js";import{Q as j}from"./QCardActions.dacc32d4.js";import{Q as z}from"./QCard.9e71421a.js";import{Q as W}from"./QDialog.500a4fb3.js";import{Q as X}from"./QPage.12dd21c8.js";import{C as Z}from"./ClosePopup.77ae0838.js";import{u as $}from"./order.2c304010.js";import{d as tt}from"./date.52e73b47.js";import"./use-dark.678b0dd2.js";import"./QInput.0fdaf5de.js";import"./format.c860d4da.js";import"./use-prevent-scroll.1269f3f5.js";import"./scroll.25b4c155.js";import"./use-model-toggle.3fd02ce3.js";import"./use-portal.0314865a.js";import"./master.58f94054.js";import"./lodash.1b69ab06.js";const et=$(),at={setup(){let g,f;const Q=I(()=>et.all.reverse());let s=n(Q.value),S=Object.values(s.value).length;const b=I(()=>{g=(v.value-1)*k.value,f=(v.value-1)*k.value+k.value;let y=s.value.slice(g,f).map(m=>({id:m.id,date:tt.formatDate(m.date,"MMMM d, YYYY "),customer:m.customer.name,narration:m.narration,status:m.status,items:m.items}));return console.log(y),y});let a=n(!1),_=n(""),h=n(""),q=n(""),C=n(""),D=n("");const A=function(V,y,m,T,U){h.value=V,_.value=T,q.value=y,C.value=m,D.value=U,a.value=!0};let v=n(1),R=n(1);const k=n(5);return{MYORDERS:s,totalcount:S,page:v,currentPage:R,totalPages:k,getOrders:b,showitems:A,specificItems:_,specificId:h,specificDate:q,specificStatus:C,specificCustomer:D,card:a}}},st={class:"q-pa-md"},lt=l("Order History"),ot=l("Unknown"),rt={key:0,class:"q-pa-lg flex flex-center"},ct={class:"q-pa-md q-gutter-sm"},dt={class:"text-weight-bold"},it=l("Unknown"),ut=l("#"),nt=l("Item"),mt=l("Quantity"),ft=l("Total Items");function _t(g,f,Q,s,S,b){return r(),c(X,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:t(()=>[x("div",st,[e(L,{class:"bg-brand text-white shadow-2"},{default:t(()=>[e(K,null,{default:t(()=>[lt]),_:1})]),_:1}),s.totalcount?(r(),c(B,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{"max-width":"350px"}},{default:t(()=>[(r(!0),w(N,null,P(s.getOrders,(a,_)=>M((r(),c(p,{clickable:"",key:a.id,onClick:h=>s.showitems(a.id,a.date,a.status,a.items,a.customer)},{default:t(()=>[e(u,{avatar:"",top:""},{default:t(()=>[e(Y,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(u,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[l(o(a.id),1)]),_:2},1024),e(d,null,{default:t(()=>[l(o(a.customer),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[l(o(a.date),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[l(o(a.narration),1)]),_:2},1024)]),_:2},1024),e(u,{side:"",top:""},{default:t(()=>[a.status==="New"?(r(),c(i,{key:0,color:"blue"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):a.status==="Viewed"?(r(),c(i,{key:1,color:"secondary"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):a.status==="Accepted"?(r(),c(i,{key:2,color:"accent"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):a.status==="Packed"?(r(),c(i,{key:3,color:"info"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):a.status==="Dispatched"?(r(),c(i,{key:4,color:"blue-grey"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):a.status==="Delivered"?(r(),c(i,{key:5,color:"positive"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):a.status==="Cancelled"?(r(),c(i,{key:6,color:"negative"},{default:t(()=>[l(o(a.status),1)]),_:2},1024)):(r(),c(i,{key:7,color:"primary"},{default:t(()=>[ot]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[G]])),128))]),_:1})):O("",!0)]),s.totalcount?(r(),w("div",rt,[e(J,{modelValue:s.page,"onUpdate:modelValue":f[0]||(f[0]=a=>s.page=a),min:s.currentPage,max:Math.ceil(s.totalcount/s.totalPages),"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):O("",!0),x("div",ct,[e(W,{modelValue:s.card,"onUpdate:modelValue":f[1]||(f[1]=a=>s.card=a)},{default:t(()=>[e(z,{class:"my-card",style:{width:"400px"}},{default:t(()=>[e(B,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:t(()=>[e(p,null,{default:t(()=>[e(u,{avatar:""},{default:t(()=>[e(Y,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[l(o(s.specificDate),1)]),_:1}),e(d,null,{default:t(()=>[l(o(s.specificCustomer),1)]),_:1}),e(d,{caption:""},{default:t(()=>[x("span",dt,o(s.specificId),1)]),_:1})]),_:1}),e(u,{side:""},{default:t(()=>[s.specificStatus==="New"?(r(),c(i,{key:0,color:"blue"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):s.specificStatus==="Viewed"?(r(),c(i,{key:1,color:"secondary"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):s.specificStatus==="Accepted"?(r(),c(i,{key:2,color:"accent"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):s.specificStatus==="Packed"?(r(),c(i,{key:3,color:"info"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):g.model==="Dispatched"?(r(),c(i,{key:4,color:"blue-grey"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):s.specificStatus==="Delivered"?(r(),c(i,{key:5,color:"positive"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):s.specificStatus==="Cancelled"?(r(),c(i,{key:6,color:"negative"},{default:t(()=>[l(o(s.specificStatus),1)]),_:1})):(r(),c(i,{key:7,color:"primary"},{default:t(()=>[it]),_:1}))]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(u,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[ut]),_:1})]),_:1}),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[nt]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[mt]),_:1})]),_:1})]),_:1}),e(E),(r(!0),w(N,null,P(s.specificItems,(a,_)=>(r(),c(p,null,{default:t(()=>[e(u,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm"},{default:t(()=>[l(o(_+1),1)]),_:2},1024)]),_:2},1024),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm"},{default:t(()=>[l(o(a.item.name),1)]),_:2},1024)]),_:2},1024),e(u,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm flex-center text-center"},{default:t(()=>[l(o(a.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),e(E),e(p,null,{default:t(()=>[e(u,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),e(u,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[ft]),_:1})]),_:1}),e(u,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[l(o(s.specificItems.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(j,{align:"right"},{default:t(()=>[M(e(H,{flat:"",label:"Close",color:"negative"},null,512),[[Z]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Rt=F(at,[["render",_t]]);export{Rt as default};
