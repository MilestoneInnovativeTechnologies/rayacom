import{a8 as ie,B as ue,k as f,r as _,E as i,H as e,C as n,N as V,G as t,Q as b,I as l,J as r,M as q,F as g,D,K as F,P as W,t as K,ap as G,aq as me}from"./index.519e6511.js";import{a as p,Q as s}from"./QItem.dbe0fd3c.js";import{Q as c}from"./QItemLabel.95c271f7.js";import{Q as v}from"./QList.ee2f0220.js";import{Q as h}from"./QCard.39c5907a.js";import{Q as u}from"./QBadge.a3efd72d.js";import{a as fe,Q as _e}from"./QToolbar.080a901a.js";import{Q as pe}from"./QPagination.908aa05f.js";import{Q as H}from"./QSeparator.8305d860.js";import{Q as ve}from"./QSelect.3a01accf.js";import{Q as ge}from"./QCardSection.a10ea186.js";import{Q as he}from"./QCardActions.2803e26a.js";import{Q as we}from"./QDialog.4aa07f16.js";import{Q as be}from"./QPage.68727071.js";import{C as xe}from"./ClosePopup.20672703.js";import{u as ke}from"./use-quasar.c19bc2e1.js";import{u as ye}from"./order.3b2eb02b.js";import{u as Qe}from"./leave.11dc3b66.js";import{u as Ce}from"./review.04954850.js";import{d as Ve}from"./date.bd456e4c.js";import{post as De}from"./axios.98808b05.js";import"./use-dark.e60f4681.js";import"./QInput.3be0fd5f.js";import"./format.c860d4da.js";import"./QMenu.ceebb96e.js";import"./position-engine.6301699e.js";import"./selection.e65ce004.js";import"./use-portal.0839ed11.js";import"./scroll.1e188d5c.js";import"./use-model-toggle.02b9d1d7.js";import"./use-prevent-scroll.d8f1a98f.js";import"./master.8d9550d1.js";import"./lodash.1b69ab06.js";const w=ye(),Se=Qe(),Oe=Ce(),Ie={setup(){const S=ue(),m=ke();let x,a;const k=f(()=>Object.values(w.all).filter(d=>d.status!="Delivered"&&d.status!="Cancelled").reverse()),O=f(()=>Object.keys(k.value).length),o=f(()=>Object.values(w.all).filter(d=>d.status=="New").length),y=f(()=>Object.values(w.all).filter(d=>d.status=="Viewed").length),P=f(()=>Object.values(w.all).filter(d=>d.status=="Accepted").length),J=f(()=>Object.values(w.all).filter(d=>d.status=="Packed").length),X=f(()=>Object.values(w.all).filter(d=>d.status=="Dispatched").length),Z=function(){S.push({name:"LEAVES"})},$=f(()=>Object.values(Oe.reviews).filter(d=>d.status=="New")),ee=f(()=>Object.values(Se.leaves).filter(d=>d.status=="New")),te=f(()=>$.value.length),ae=f(()=>ee.value.length),le=function(){S.push({name:"REVIEWS"})};let N,A,Q=_(null);const oe=f(()=>(x=(z.value-1)*C.value,a=x+C.value,N=Object.values(k.value).slice(x,a),A=N.map(d=>(d.status,{id:d.id,date:Ve.formatDate(d.date,"MMMM D, YYYY "),narration:d.narration,customer:d.customer.name,status:d.status,items:d.items})),A)),R=function(){De("order","status",{order:I.value,status:Q.value}).then(console.log),Y("Order status updated Successfully")};let L=_(!1),M=_(""),j=_(""),I=_(""),B=_(""),E=_("");const re=function(d,ce,ne,T,U){console.log(U),j.value=d,I.value=ce,M.value=U,B.value=ne,T=="New"?(E.value=Q.value="VIEWED",R()):E.value=Q.value=T,L.value=!0},Y=function(d){m.notify({type:"positive",message:d,icon:"cloud_done",position:"top-right",timeout:1e3})};let z=_(1),de=_(1);const C=_(5),se=f(()=>Math.ceil(O.value/C.value));return{MYORDERS:k,newCount:o,viewedCount:y,acceptedCount:P,packedCount:J,dispatchedCount:X,totalcount:O,leavecount:ae,reviewcount:te,page:z,currentPage:de,totalPages:C,maxVal:se,getOrders:oe,showitems:re,specificItems:M,specificId:I,specificCustomer:j,specificDate:B,specificStatus:E,card:L,model:Q,options:["Accepted","Packed","Dispatched","Delivered","Cancelled"],updateStatus:R,positivemsg:Y,gotoLeave:Z,gotoReview:le}}},Ee={class:"q-pa-md row items-start q-gutter-md"},qe=l("New"),Pe=l("Viewed"),Ne=l("Accepted"),Ae=l("Packed"),Re=l("Dispatched"),Le={class:"q-pa-md q-gutter-sm"},Me={key:0,class:"q-pa-md"},je=l("ORDERS"),Be=l("Unknown"),Ye={key:0,class:"q-pa-lg flex flex-center"},ze={class:"q-pa-md q-gutter-sm"},Te={class:"text-weight-bold"},Ue=l("Unknown"),Fe=l("#"),We=l("Item"),Ke=l("Quantity"),Ge=l("FOC"),He=l("\xA0"),Je=l("Total Items");function Xe(S,m,x,a,k,O){return n(),i(be,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:e(()=>[V("div",Ee,[t(h,{class:"my-card text-white",style:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)",width:"80vw"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"local_bar",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.newCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[qe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(h,{class:"my-card",style:{background:"radial-gradient(circle, #f5b38b 0%, rgb(162,66,6) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"travel_explore",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.viewedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Pe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(h,{class:"my-card",style:{background:"radial-gradient(circle, #ee9bfa 0%, rgb(83,2,94) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"done_all",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.acceptedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Ne]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(h,{class:"my-card",style:{background:"radial-gradient(circle, rgba(248,232,54,0.93) 0%, rgba(103,95,8,0.93) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"work",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.packedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Ae]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(h,{class:"my-card",style:{background:"radial-gradient(circle, #86f6ed 0%, #046558 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"local_shipping",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.dispatchedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Re]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),V("div",Le,[a.leavecount?(n(),i(q,{key:0,color:"white","text-color":"primary","icon-right":"sick",label:"LEAVES",onClick:m[0]||(m[0]=o=>a.gotoLeave())},{default:e(()=>[t(u,{color:"positive",floating:"",transparent:""},{default:e(()=>[l(r(a.leavecount),1)]),_:1})]),_:1})):g("",!0),a.reviewcount?(n(),i(q,{key:1,color:"white","text-color":"primary","icon-right":"comment_bank",label:"REVIEWS",onClick:m[1]||(m[1]=o=>a.gotoReview())},{default:e(()=>[t(u,{color:"accent",floating:"",transparent:""},{default:e(()=>[l(r(a.reviewcount),1)]),_:1})]),_:1})):g("",!0)]),a.totalcount?(n(),D("div",Me,[t(_e,{class:"bg-brand text-white shadow-2"},{default:e(()=>[t(fe,null,{default:e(()=>[je]),_:1})]),_:1}),a.totalcount?(n(),i(v,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{width:"80vw","max-width":"350px"}},{default:e(()=>[(n(!0),D(F,null,W(a.getOrders,(o,y)=>K((n(),i(p,{clickable:"",key:o.id,onClick:P=>a.showitems(o.customer,o.id,o.date,o.status,o.items)},{default:e(()=>[t(s,{avatar:"",top:""},{default:e(()=>[t(G,{color:"brand","text-color":"white"},{default:e(()=>[l(r(o.customer.charAt(0)),1)]),_:2},1024)]),_:2},1024),t(s,null,{default:e(()=>[t(c,{lines:"1"},{default:e(()=>[l(r(o.customer),1)]),_:2},1024),t(c,{caption:""},{default:e(()=>[l(r(o.date),1)]),_:2},1024),t(c,{caption:""},{default:e(()=>[l(r(o.narration),1)]),_:2},1024)]),_:2},1024),t(s,{side:"",top:""},{default:e(()=>[o.status==="New"?(n(),i(u,{key:0,color:"blue"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Viewed"?(n(),i(u,{key:1,color:"secondary"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Accepted"?(n(),i(u,{key:2,color:"accent"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Packed"?(n(),i(u,{key:3,color:"info"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Dispatched"?(n(),i(u,{key:4,color:"blue-grey"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):(n(),i(u,{key:5,color:"primary"},{default:e(()=>[Be]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[me]])),128)),a.totalcount?(n(),D("div",Ye,[t(pe,{modelValue:a.page,"onUpdate:modelValue":m[2]||(m[2]=o=>a.page=o),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):g("",!0)]),_:1})):g("",!0)])):g("",!0),V("div",ze,[t(we,{modelValue:a.card,"onUpdate:modelValue":m[5]||(m[5]=o=>a.card=o)},{default:e(()=>[t(h,{style:{"min-width":"400px"}},{default:e(()=>[t(v,{bordered:"",class:"rounded-borders"},{default:e(()=>[t(p,null,{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(G,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(s,{top:""},{default:e(()=>[t(c,{lines:"1"},{default:e(()=>[l(r(a.specificCustomer),1)]),_:1}),t(c,{lines:"2"},{default:e(()=>[l(r(a.specificDate),1)]),_:1}),t(c,{caption:"",lines:"3"},{default:e(()=>[V("span",Te,r(a.specificId),1)]),_:1})]),_:1}),t(s,{side:""},{default:e(()=>[a.model==="New"?(n(),i(u,{key:0,color:"blue"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Viewed"?(n(),i(u,{key:1,color:"secondary"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Accepted"?(n(),i(u,{key:2,color:"accent"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Packed"?(n(),i(u,{key:3,color:"info"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Dispatched"?(n(),i(u,{key:4,color:"blue-grey"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Delivered"?(n(),i(u,{key:5,color:"positive"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Cancelled"?(n(),i(u,{key:6,color:"negative"},{default:e(()=>[l(r(a.model),1)]),_:1})):(n(),i(u,{key:7,color:"primary"},{default:e(()=>[Ue]),_:1}))]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(s,{top:""},{default:e(()=>[t(c,{class:"text-weight-medium"},{default:e(()=>[Fe]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(c,{class:"text-weight-medium"},{default:e(()=>[We]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(c,{class:"text-weight-medium text-center"},{default:e(()=>[Ke]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(c,{class:"text-weight-medium text-center"},{default:e(()=>[Ge]),_:1})]),_:1})]),_:1}),t(H),(n(!0),D(F,null,W(a.specificItems,(o,y)=>(n(),i(p,null,{default:e(()=>[t(s,{avatar:"",top:""},{default:e(()=>[t(c,null,{default:e(()=>[l(r(y+1),1)]),_:2},1024)]),_:2},1024),t(s,{top:""},{default:e(()=>[t(c,null,{default:e(()=>[l(r(o.item.name),1)]),_:2},1024)]),_:2},1024),t(s,{top:""},{default:e(()=>[t(c,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[l(r(o.quantity),1)]),_:2},1024)]),_:2},1024),t(s,{top:""},{default:e(()=>[o.foc>0?(n(),i(c,{key:0,class:"q-mt-sm flex-center text-center"},{default:e(()=>[l(r(o.foc),1)]),_:2},1024)):g("",!0)]),_:2},1024)]),_:2},1024))),256)),t(H),t(p,null,{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(c,null,{default:e(()=>[He]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(c,{class:"text-weight-medium"},{default:e(()=>[Je]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(c,{class:"text-weight-medium text-center"},{default:e(()=>[l(r(a.specificItems.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(ge,null,{default:e(()=>[t(ve,{filled:"",modelValue:a.model,"onUpdate:modelValue":[m[3]||(m[3]=o=>a.model=o),m[4]||(m[4]=o=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1}),t(he,{align:"right"},{default:e(()=>[K(t(q,{flat:"",label:"Close",color:"negative"},null,512),[[xe]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var Et=ie(Ie,[["render",Xe],["__scopeId","data-v-0c1adecc"]]);export{Et as default};
