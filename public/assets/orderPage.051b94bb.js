import{Q as d}from"./QItemLabel.780cbcc6.js";import{a as f,Q as l}from"./QItem.66a42e1c.js";import{ai as D,aB as I,J as N,r as p,M as y,P as t,K as _,O as e,S as n,L as O,_ as q,T as v,ak as h,R as P,U as Y,Q as V,X as g,N as A,ah as U,ag as L,as as M,al as R,B as C,at as H,Y as T}from"./index.d755ac14.js";import{Q as J}from"./QList.1c77fae5.js";import{Q as E}from"./QPage.0b6c8760.js";import{C as w}from"./ClosePopup.bea0ea49.js";import{d as F}from"./date.7fc66f0f.js";import{u as K}from"./use-quasar.87192af1.js";import{u as X}from"./order.beb5b52a.js";import{post as j}from"./axios.f3978ac2.js";import"./format.c860d4da.js";import"./master.05480c04.js";import"./lodash.1e9e3f94.js";X();const z={setup(){const x=K();I();const s=N(),i=p(JSON.parse(history.state.products)),a=p(""),Q=function(){var u=o.value;i.value.splice(u,1),c.value=!1},c=p(!1),o=p(null),m=function(u){c.value=!0,o.value=u};let r,k;const S=function(){r=Date.now(),k=F.formatDate(r,"YYYY-MM-DD HH:mm:ss");var u=i.value.some(function(B){return B.quantity===0});u||(j("order","store",{date:k,narration:a.value,items:i.value}),i.length=0,b("Your Order have saved successfully"),s.push({name:"DASHBOARD"}))},b=function(u){x.notify({type:"positive",message:u,icon:"cloud_done",position:"top-right",timeout:1e3})};return{myproducts:i,removeItem:Q,confirm:c,confirmBox:m,confirmOrder:S,notes:a,positivemsg:b}}},G=T("span",{class:"q-ml-sm"},"Are you sure you want to delete?",-1);function W(x,s,i,a,Q,c){return _(),y(E,{padding:"",class:"flex flex-center column q-gutter-y-xl"},{default:t(()=>[e(J,{bordered:""},{default:t(()=>[e(f,{clickable:"",class:"text-subtitle2 bg-deep-orange-10 text-white"},{default:t(()=>[e(l,{class:"text-white",avatar:""},{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[n("#")]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[n("Item")]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[n("Quantity")]),_:1})]),_:1}),e(l,{class:"text-white",side:""})]),_:1}),(_(!0),O(Y,null,q(a.myproducts,(o,m)=>(_(),y(f,{clickable:"",key:o.id},{default:t(()=>[e(l,{class:"text-black",avatar:""},{default:t(()=>[e(d,null,{default:t(()=>[n(v(m+1),1)]),_:2},1024)]),_:2},1024),e(l,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[n(v(o.itemname),1)]),_:2},1024)]),_:2},1024),e(l,{side:"",top:""},{default:t(()=>[e(h,{outlined:"",dense:"",maxlength:"4",style:{"max-width":"60px"},modelValue:a.myproducts[m].quantity,"onUpdate:modelValue":r=>a.myproducts[m].quantity=r,modelModifiers:{number:!0},mask:"#","fill-mask":"0","reverse-fill-mask":"",rules:[r=>r!==null&&r!==""&&parseInt(r)!=NaN||"Please type a number",r=>r>0||"Please type a real number"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(l,{avatar:"",side:"",top:""},{default:t(()=>[e(P,{name:"cancel",onClick:r=>a.confirmBox(m),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(V),e(f,{clickable:"",class:"text-subtitle2"},{default:t(()=>[e(l,{avatar:""},{default:t(()=>[n("\xA0")]),_:1}),e(l,null,{default:t(()=>[n("Total Items:")]),_:1}),e(l,null,{default:t(()=>[e(d,null,{default:t(()=>[n(v(a.myproducts.length),1)]),_:1})]),_:1})]),_:1}),e(V),e(f,{clickable:"",class:"text-subtitle2"},{default:t(()=>[e(l,null,{default:t(()=>[n("Notes")]),_:1}),e(l,null,{default:t(()=>[e(h,{outlined:"",modelValue:a.notes,"onUpdate:modelValue":s[0]||(s[0]=o=>a.notes=o),type:"text",maxlength:"500",autogrow:"",counter:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a.myproducts.length?(_(),y(g,{key:0,color:"positive",label:"Save",type:"submit",icon:"camera_enhance",onClick:s[1]||(s[1]=o=>a.confirmOrder())})):A("",!0),e(H,{modelValue:a.confirm,"onUpdate:modelValue":s[3]||(s[3]=o=>a.confirm=o),persistent:""},{default:t(()=>[e(U,null,{default:t(()=>[e(L,{class:"row items-center"},{default:t(()=>[e(M,{icon:"delete",color:"primary","text-color":"white"}),G]),_:1}),e(R,{align:"right"},{default:t(()=>[C(e(g,{flat:"",label:"Cancel",color:"primary"},null,512),[[w]]),C(e(g,{flat:"",label:"Delete",color:"primary",onClick:s[2]||(s[2]=o=>a.removeItem())},null,512),[[w]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var de=D(z,[["render",W]]);export{de as default};
