import{Q as s}from"./QItemLabel.e6fa0dc1.js";import{Q as m}from"./QBadge.fbb9c512.js";import{a as _,Q as r}from"./QItem.899e600d.js";import{Q as B}from"./QList.36addd93.js";import{Q as L}from"./QCard.fc586c7a.js";import{Q as G}from"./QPagination.7c56899a.js";import{a8 as H,B as J,r as u,k as h,E as i,H as e,C as d,D as M,K as T,P as z,G as t,I as o,J as c,F as j,N as W,ap as X,Q as b,t as Z,M as $}from"./index.246a4b9a.js";import{Q as ee}from"./QSeparator.265b03cf.js";import{Q as te}from"./QSelect.f089caed.js";import{Q as ae}from"./QCardActions.dab7d62d.js";import{Q as le}from"./QDialog.731c9919.js";import{Q as oe}from"./QPage.d4defc19.js";import{C as se}from"./ClosePopup.7f3f20ff.js";import{u as re}from"./leave.5cc094f8.js";import{post as de}from"./axios.93d508e0.js";import{d as y}from"./date.fd5a70cf.js";import{u as ce}from"./use-quasar.42c4e941.js";import"./use-dark.b88f123a.js";import"./QInput.19c0c42c.js";import"./format.c860d4da.js";import"./QMenu.ceb76e5d.js";import"./position-engine.ece6e7e4.js";import"./selection.53dd3c90.js";import"./use-portal.f505e8fd.js";import"./scroll.606ee28b.js";import"./use-model-toggle.4c9c2223.js";import"./use-prevent-scroll.b4d5fbe2.js";import"./master.9f86e441.js";import"./lodash.1e9e3f94.js";const ie=re(),ne={setup(){J();const q=ce();let n,Q,a=u(null);const v=h(()=>Object.values(ie.leaves).reverse());let k=Object.values(v.value).length;const l=h(()=>(n=(Y.value-1)*p.value,Q=(Y.value-1)*p.value+p.value,v.value.slice(n,Q).map(f=>({id:f.id,executive:f.executive.name,start_date:y.formatDate(f.start_date,"MMMM d, YYYY "),end_date:y.formatDate(f.end_date,"MMMM d, YYYY "),description:f.description,status:f.status}))));let w=u(!1),g=u(""),V=u(""),S=u(""),P=u(""),D=u(""),C=u("");const U=function(x,I,f,F,O,N){g.value=x,C.value=I,V.value=y.formatDate(f,"DD-MM-YYYY"),S.value=y.formatDate(F,"DD-MM-YYYY"),P.value=O,N=="New"?(D.value=a.value="Progress",E()):D.value=a.value=N,w.value=!0},E=function(){de("leave","status",{id:g.value,status:a.value}).then(console.log),A("Leave status updated Successfully")},A=function(x){q.notify({type:"positive",message:x,icon:"cloud_done",position:"top-right",timeout:2e3})};let Y=u(1),R=u(1);const p=u(10),K=h(()=>Math.ceil(k/p.value));return{MYLEAVES:v,totalcount:k,page:Y,currentPage:R,totalPages:p,maxVal:K,getData:l,openwindow:U,specificId:g,specificExecutive:C,specificstartDate:V,specificendDate:S,specificeDescription:P,specificStatus:D,card:w,options:["Accepted","Rejected"],model:a,updateStatus:E,positivemsg:A}}},ue={key:0,class:"q-pa-md row items-start q-gutter-md"},me=o("Unknown"),fe={key:1,class:"q-pa-lg flex flex-center"},_e={class:"q-pa-md q-gutter-sm"},pe=o("Unknown"),ve=o("Start Date"),ge=o("End Date"),xe=o("Description");function ye(q,n,Q,a,v,k){return d(),i(oe,{padding:"",class:"flex column q-col-gutter-y-lg"},{default:e(()=>[a.totalcount?(d(),M("div",ue,[(d(!0),M(T,null,z(a.getData,(l,w)=>(d(),i(L,{flat:"",bordered:"",class:"my-card",key:l.id,onClick:g=>a.openwindow(l.id,l.executive,l.start_date,l.end_date,l.description,l.status)},{default:e(()=>[t(B,null,{default:e(()=>[t(_,{class:"bg-brand text-white text-bold"},{default:e(()=>[t(r,null,{default:e(()=>[t(s,{class:"text-overline"},{default:e(()=>[o(c(l.executive),1)]),_:2},1024),t(s,{class:"text-subtitle2"},{default:e(()=>[o(c(l.start_date),1)]),_:2},1024),t(s,null,{default:e(()=>[l.status==="New"?(d(),i(m,{key:0,color:"blue"},{default:e(()=>[o(c(l.status),1)]),_:2},1024)):l.status==="Progress"?(d(),i(m,{key:1,color:"secondary"},{default:e(()=>[o(c(l.status),1)]),_:2},1024)):l.status==="Accepted"?(d(),i(m,{key:2,color:"positive"},{default:e(()=>[o(c(l.status),1)]),_:2},1024)):l.status==="Rejected"?(d(),i(m,{key:3,color:"accent"},{default:e(()=>[o(c(l.status),1)]),_:2},1024)):(d(),i(m,{key:4,color:"dark"},{default:e(()=>[me]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):j("",!0),a.totalcount?(d(),M("div",fe,[t(G,{modelValue:a.page,"onUpdate:modelValue":n[0]||(n[0]=l=>a.page=l),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"deep-orange-10"},null,8,["modelValue","min","max"])])):j("",!0),W("div",_e,[t(le,{modelValue:a.card,"onUpdate:modelValue":n[3]||(n[3]=l=>a.card=l)},{default:e(()=>[t(L,{class:"my-card",style:{"max-width":"400px"}},{default:e(()=>[t(B,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:e(()=>[t(_,null,{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(X,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(s,{lines:"1"},{default:e(()=>[o(c(a.specificExecutive),1)]),_:1}),t(s,{lines:"2"}),t(s,{caption:"",lines:"3"},{default:e(()=>[o(c(a.specificId),1)]),_:1})]),_:1}),t(r,{side:""},{default:e(()=>[a.model==="New"?(d(),i(m,{key:0,color:"blue"},{default:e(()=>[o(c(a.model),1)]),_:1})):a.model==="Progress"?(d(),i(m,{key:1,color:"secondary"},{default:e(()=>[o(c(a.model),1)]),_:1})):a.model==="Accepted"?(d(),i(m,{key:2,color:"positive"},{default:e(()=>[o(c(a.model),1)]),_:1})):a.model==="Rejected"?(d(),i(m,{key:3,color:"negative"},{default:e(()=>[o(c(a.model),1)]),_:1})):(d(),i(m,{key:4,color:"primary"},{default:e(()=>[pe]),_:1}))]),_:1})]),_:1}),t(ee),t(_,null,{default:e(()=>[t(r,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(r,{top:"",class:"col-3 gt-sm"},{default:e(()=>[t(s,{class:"q-mt-sm"},{default:e(()=>[ve]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(s,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[o(c(a.specificstartDate),1)]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{class:"col-1 gt-sm"},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(r,{top:"",class:"col-3 gt-sm"},{default:e(()=>[t(s,{class:"q-mt-sm"},{default:e(()=>[ge]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(s,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[o(c(a.specificendDate),1)]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{class:"col-1 gt-sm"},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(b,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(r,{top:"",class:"col-3 gt-sm"},{default:e(()=>[t(s,{class:"q-mt-sm"},{default:e(()=>[xe]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(s,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[o(c(a.specificeDescription),1)]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{top:"",class:"col-2 gt-sm"},{default:e(()=>[t(s,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(s,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[t(te,{filled:"",modelValue:a.model,"onUpdate:modelValue":[n[1]||(n[1]=l=>a.model=l),n[2]||(n[2]=l=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(s,{class:"q-mt-sm"})]),_:1})]),_:1})]),_:1}),t(ae,{align:"right"},{default:e(()=>[Z(t($,{flat:"",label:"Close",color:"negative"},null,512),[[se]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ze=H(ne,[["render",ye],["__scopeId","data-v-61034c3c"]]);export{ze as default};
