import{a as Z,Q as $}from"./QToolbar.1bf24825.js";import{a8 as ee,B as te,k as v,r as f,E as d,H as e,C as s,N as Y,G as t,D as V,P as E,t as R,ap as T,I as o,J as r,K as U,F as L,M as ae,aq as le}from"./index.246a4b9a.js";import{a as _,Q as c}from"./QItem.899e600d.js";import{Q as m}from"./QItemLabel.e6fa0dc1.js";import{Q as u}from"./QBadge.fbb9c512.js";import{Q as F}from"./QList.36addd93.js";import{Q as oe}from"./QPagination.7c56899a.js";import{Q as K}from"./QSeparator.265b03cf.js";import{Q as se}from"./QSelect.f089caed.js";import{Q as re}from"./QCardActions.dab7d62d.js";import{Q as de}from"./QCard.fc586c7a.js";import{Q as ce}from"./QDialog.731c9919.js";import{Q as me}from"./QPage.d4defc19.js";import{C as ie}from"./ClosePopup.7f3f20ff.js";import{u as ue}from"./use-quasar.42c4e941.js";import{u as ne}from"./order.ffac0f74.js";import{d as fe}from"./date.fd5a70cf.js";import{post as _e}from"./axios.93d508e0.js";import"./use-dark.b88f123a.js";import"./QInput.19c0c42c.js";import"./format.c860d4da.js";import"./QMenu.ceb76e5d.js";import"./position-engine.ece6e7e4.js";import"./selection.53dd3c90.js";import"./use-portal.f505e8fd.js";import"./scroll.606ee28b.js";import"./use-model-toggle.4c9c2223.js";import"./use-prevent-scroll.b4d5fbe2.js";import"./master.9f86e441.js";import"./lodash.1e9e3f94.js";const pe=ne(),ge={setup(){const D=te(),n=ue();let h,a,w;const p=v(()=>pe.all),l=v(()=>{let i=[];for(let k in p.value)h=p.value[k].status,h!="Delivered"&&h!="Cancelled"&&i.push(p.value[k]);return i.reverse()}),g=v(()=>Object.keys(l.value).length);let Q,C,x=f(null);const j=v(()=>(a=(A.value-1)*y.value,w=a+y.value,Q=Object.values(l.value).slice(a,w),C=Q.map(i=>(i.status,{id:i.id,date:fe.formatDate(i.date,"MMMM D, YYYY "),narration:i.narration,customer:i.customer.name,status:i.status,items:i.items})),C)),G=function(){D.push({name:"ITEM"})},S=function(){_e("order","status",{order:b.value,status:x.value}).then(console.log),O("Order status updated Successfully")};let I=f(!1),P=f(""),M=f(""),b=f(""),N=f(""),q=f("");const H=function(i,k,W,B,X){M.value=i,b.value=k,P.value=X,N.value=W,B=="New"?(q.value=x.value="Viewed",S()):q.value=x.value=B,I.value=!0},O=function(i){n.notify({type:"positive",message:i,icon:"cloud_done",position:"top-right",timeout:1e3})};let A=f(1),J=f(1);const y=f(5),z=v(()=>Math.ceil(g.value/y.value));return{ORDERS:p,MYORDERS:l,totalcount:g,page:A,currentPage:J,totalPages:y,maxVal:z,getOrders:j,gotoItempage:G,showitems:H,specificItems:P,specificId:b,specificCustomer:M,specificDate:N,specificStatus:q,card:I,model:x,options:["Accepted","Packed","Dispatched","Delivered","Cancelled"],updateStatus:S,positivemsg:O}}},ve={class:"q-pa-md",style:{width:"80vw","max-width":"350px"}},he=o("Dashboard"),xe=o("Unknown"),ye={key:0,class:"q-pa-lg flex flex-center"},ke={class:"q-pa-md q-gutter-sm"},we=o("Unknown"),Qe=o("#"),be=o("Item"),qe=o("Quantity"),Ve=o("Total Items");function De(D,n,h,a,w,p){return s(),d(me,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:e(()=>[Y("div",ve,[t($,{class:"bg-brand text-white shadow-2"},{default:e(()=>[t(Z,null,{default:e(()=>[he]),_:1})]),_:1}),a.totalcount?(s(),d(F,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{"max-width":"350px"}},{default:e(()=>[(s(!0),V(U,null,E(a.getOrders,(l,g)=>R((s(),d(_,{clickable:"",key:l.id,onClick:Q=>a.showitems(l.customer,l.id,l.date,l.status,l.items)},{default:e(()=>[t(c,{avatar:"",top:""},{default:e(()=>[t(T,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(c,null,{default:e(()=>[t(m,null,{default:e(()=>[o(r(l.customer),1)]),_:2},1024),t(m,{caption:""},{default:e(()=>[o(r(l.date),1)]),_:2},1024),t(m,{caption:""},{default:e(()=>[o(r(l.narration),1)]),_:2},1024)]),_:2},1024),t(c,{side:"",top:""},{default:e(()=>[l.status==="New"?(s(),d(u,{key:0,color:"blue"},{default:e(()=>[o(r(l.status),1)]),_:2},1024)):l.status==="Viewed"?(s(),d(u,{key:1,color:"secondary"},{default:e(()=>[o(r(l.status),1)]),_:2},1024)):l.status==="Accepted"?(s(),d(u,{key:2,color:"accent"},{default:e(()=>[o(r(l.status),1)]),_:2},1024)):l.status==="Packed"?(s(),d(u,{key:3,color:"info"},{default:e(()=>[o(r(l.status),1)]),_:2},1024)):l.status==="Dispatched"?(s(),d(u,{key:4,color:"blue-grey"},{default:e(()=>[o(r(l.status),1)]),_:2},1024)):(s(),d(u,{key:5,color:"primary"},{default:e(()=>[xe]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[le]])),128))]),_:1})):L("",!0)]),a.totalcount?(s(),V("div",ye,[t(oe,{modelValue:a.page,"onUpdate:modelValue":n[0]||(n[0]=l=>a.page=l),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):L("",!0),Y("div",ke,[t(ce,{modelValue:a.card,"onUpdate:modelValue":n[3]||(n[3]=l=>a.card=l)},{default:e(()=>[t(de,{class:"my-card",style:{width:"400px"}},{default:e(()=>[t(F,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:e(()=>[t(_,null,{default:e(()=>[t(c,{avatar:""},{default:e(()=>[t(T,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(c,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(m,{lines:"1"},{default:e(()=>[o(r(a.specificCustomer),1)]),_:1}),t(m,{lines:"2"},{default:e(()=>[o(r(a.specificDate),1)]),_:1})]),_:1}),t(c,{side:""},{default:e(()=>[a.model==="New"?(s(),d(u,{key:0,color:"blue"},{default:e(()=>[o(r(a.model),1)]),_:1})):a.model==="Viewed"?(s(),d(u,{key:1,color:"secondary"},{default:e(()=>[o(r(a.model),1)]),_:1})):a.model==="Accepted"?(s(),d(u,{key:2,color:"accent"},{default:e(()=>[o(r(a.model),1)]),_:1})):a.model==="Packed"?(s(),d(u,{key:3,color:"info"},{default:e(()=>[o(r(a.model),1)]),_:1})):a.model==="Dispatched"?(s(),d(u,{key:4,color:"blue-grey"},{default:e(()=>[o(r(a.model),1)]),_:1})):a.model==="Delivered"?(s(),d(u,{key:5,color:"positive"},{default:e(()=>[o(r(a.model),1)]),_:1})):a.model==="Cancelled"?(s(),d(u,{key:6,color:"negative"},{default:e(()=>[o(r(a.model),1)]),_:1})):(s(),d(u,{key:7,color:"primary"},{default:e(()=>[we]),_:1}))]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[Qe]),_:1})]),_:1}),t(c,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[be]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[qe]),_:1})]),_:1})]),_:1}),t(K),(s(!0),V(U,null,E(a.specificItems,(l,g)=>(s(),d(_,null,{default:e(()=>[t(c,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm"},{default:e(()=>[o(r(g+1),1)]),_:2},1024)]),_:2},1024),t(c,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm"},{default:e(()=>[o(r(l.item.name),1)]),_:2},1024)]),_:2},1024),t(c,{top:""},{default:e(()=>[t(m,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[o(r(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),t(K),t(_,null,{default:e(()=>[t(c,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(c,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[Ve]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[o(r(a.specificItems.length),1)]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(c,{top:"",class:"col-2 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(c,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(m,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[t(se,{filled:"",modelValue:a.model,"onUpdate:modelValue":[n[1]||(n[1]=l=>a.model=l),n[2]||(n[2]=l=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(m,{class:"q-mt-sm"})]),_:1})]),_:1})]),_:1}),t(re,{align:"right"},{default:e(()=>[R(t(ae,{flat:"",label:"Close",color:"negative"},null,512),[[ie]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ot=ee(ge,[["render",De]]);export{ot as default};
