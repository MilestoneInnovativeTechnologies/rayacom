import{a8 as ee,B as te,r as i,k as x,E as u,H as e,C as r,G as t,Q,N as D,D as g,K,P as T,J as d,F as M,I as l,ap as ae,t as oe,M as le}from"./index.519e6511.js";import{Q as re}from"./QInput.3be0fd5f.js";import{Q as q}from"./QList.ee2f0220.js";import{Q as n}from"./QItemLabel.95c271f7.js";import{Q as f}from"./QBadge.a3efd72d.js";import{a as y,Q as c}from"./QItem.dbe0fd3c.js";import{Q as F}from"./QCard.39c5907a.js";import{Q as se}from"./QPagination.908aa05f.js";import{Q as de}from"./QSeparator.8305d860.js";import{Q as ne}from"./QSelect.3a01accf.js";import{Q as ie}from"./QCardSection.a10ea186.js";import{Q as ce}from"./QCardActions.2803e26a.js";import{Q as ue}from"./QDialog.4aa07f16.js";import{Q as pe}from"./QPage.68727071.js";import{C as fe}from"./ClosePopup.20672703.js";import{u as me}from"./leave.11dc3b66.js";import{post as _e}from"./axios.98808b05.js";import{d as S}from"./date.bd456e4c.js";import{u as ve}from"./use-quasar.c19bc2e1.js";import{u as xe}from"./master.8d9550d1.js";import"./use-dark.e60f4681.js";import"./format.c860d4da.js";import"./QMenu.ceebb96e.js";import"./position-engine.6301699e.js";import"./selection.e65ce004.js";import"./use-portal.0839ed11.js";import"./scroll.1e188d5c.js";import"./use-model-toggle.02b9d1d7.js";import"./use-prevent-scroll.d8f1a98f.js";import"./lodash.1b69ab06.js";const ge=xe(),we=ge.SALES_EXECUTIVE,X=me(),he={setup(){te();const P=ve();let s=i(!1);const _=i(""),a=x(()=>we),L=x(()=>{if(_.value==="")return Object.values(a.value);{let p=_.value.toLowerCase();return Object.values(a.value).filter(v=>v.name.toLowerCase().indexOf(p)>-1)}}),V=x(()=>{if(_.value==="")return Object.values(X.leaves).reverse();{let p=_.value.toLowerCase();return Object.values(X.leaves).filter(v=>v.executive.name.toLowerCase().indexOf(p)>-1)}}),o=function(p,v){_.value=p,s.value=!s.value},w=x(()=>V.value.length);let k,I;const G=x(()=>(k=(E.value-1)*h.value,I=(E.value-1)*h.value+h.value,V.value.slice(k,I).map(m=>({id:m.id,executive:m.executive.name,start_date:S.formatDate(m.start_date,"MMMM D, YYYY "),end_date:S.formatDate(m.end_date,"MMMM D, YYYY "),description:m.description,status:m.status}))));let A=i(!1),Y=i(""),j=i(""),N=i(""),U=i(""),C=i(""),B=i(""),b=i(null);const H=function(p,v,m,Z,$,z){Y.value=p,B.value=v,j.value=S.formatDate(m,"DD-MM-YYYY"),N.value=S.formatDate(Z,"DD-MM-YYYY"),U.value=$,z=="New"?(C.value=b.value="Progress",O()):C.value=b.value=z,A.value=!0},O=function(){_e("leave","status",{id:Y.value,status:b.value}).then(console.log),R("Leave status updated Successfully")},R=function(p){P.notify({type:"positive",message:p,icon:"cloud_done",position:"top-right",timeout:2e3})};let E=i(1),J=i(1);const h=i(10),W=x(()=>Math.ceil(w.value/h.value));return{totalcount:w,page:E,currentPage:J,totalPages:h,maxVal:W,getData:G,openwindow:H,specificId:Y,specificExecutive:B,specificstartDate:j,specificendDate:N,specificeDescription:U,specificStatus:C,card:A,options:["Accepted","Rejected"],model:b,updateStatus:O,positivemsg:R,MYSALESEXECUTIVES:a,search:_,searchExecutives:L,isVisible:s,selectExecutive:o}}},ye={class:"dropdown-wrapper"},ke={key:0,class:"dropdown-popover"},be={class:"options"},Qe=["onClick"],De={key:0,class:"q-pa-md row items-start q-gutter-md"},Se=l("Unknown"),Ve={key:1,class:"q-pa-lg flex flex-center"},Ye={class:"q-pa-md q-gutter-sm"},Ce=l("Unknown"),Ee=l("Start Date"),Me=l("End Date"),qe=l("Description");function Pe(P,s,_,a,L,V){return r(),u(pe,{padding:"",class:"flex column q-col-gutter-y-lg"},{default:e(()=>[t(q,null,{default:e(()=>[t(re,{modelValue:a.search,"onUpdate:modelValue":s[0]||(s[0]=o=>a.search=o),debounce:"500",filled:"",placeholder:"Search",onClick:s[1]||(s[1]=o=>a.isVisible=!a.isVisible)},{append:e(()=>[t(Q,{name:"search"})]),_:1},8,["modelValue"]),D("section",ye,[a.isVisible?(r(),g("div",ke,[D("div",be,[D("ul",null,[(r(!0),g(K,null,T(a.searchExecutives,(o,w)=>(r(),g("li",{onClick:k=>a.selectExecutive(o.name,o.id),key:`user-${w}`},d(o.name),9,Qe))),128))])])])):M("",!0)])]),_:1}),a.totalcount?(r(),g("div",De,[(r(!0),g(K,null,T(a.getData,(o,w)=>(r(),u(F,{flat:"",bordered:"",class:"my-card",key:o.id,onClick:k=>a.openwindow(o.id,o.executive,o.start_date,o.end_date,o.description,o.status)},{default:e(()=>[t(q,null,{default:e(()=>[t(y,{class:"bg-brand text-white text-bold"},{default:e(()=>[t(c,null,{default:e(()=>[t(n,{class:"text-overline"},{default:e(()=>[l(d(o.executive),1)]),_:2},1024),t(n,{class:"text-subtitle2"},{default:e(()=>[l(d(o.start_date),1)]),_:2},1024),t(n,null,{default:e(()=>[o.status==="New"?(r(),u(f,{key:0,color:"blue"},{default:e(()=>[l(d(o.status),1)]),_:2},1024)):o.status==="Progress"?(r(),u(f,{key:1,color:"secondary"},{default:e(()=>[l(d(o.status),1)]),_:2},1024)):o.status==="Accepted"?(r(),u(f,{key:2,color:"positive"},{default:e(()=>[l(d(o.status),1)]),_:2},1024)):o.status==="Rejected"?(r(),u(f,{key:3,color:"accent"},{default:e(()=>[l(d(o.status),1)]),_:2},1024)):(r(),u(f,{key:4,color:"dark"},{default:e(()=>[Se]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):M("",!0),a.totalcount?(r(),g("div",Ve,[t(se,{modelValue:a.page,"onUpdate:modelValue":s[2]||(s[2]=o=>a.page=o),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"deep-orange-10"},null,8,["modelValue","min","max"])])):M("",!0),D("div",Ye,[t(ue,{modelValue:a.card,"onUpdate:modelValue":s[5]||(s[5]=o=>a.card=o)},{default:e(()=>[t(F,{class:"my-card",style:{"max-width":"400px"}},{default:e(()=>[t(q,{bordered:"",class:"rounded-borders"},{default:e(()=>[t(y,null,{default:e(()=>[t(c,{avatar:""},{default:e(()=>[t(ae,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{lines:"1"},{default:e(()=>[l(d(a.specificExecutive),1)]),_:1}),t(n,{lines:"2"}),t(n,{caption:"",lines:"3"},{default:e(()=>[l(d(a.specificId),1)]),_:1})]),_:1}),t(c,{side:""},{default:e(()=>[a.model==="New"?(r(),u(f,{key:0,color:"blue"},{default:e(()=>[l(d(a.model),1)]),_:1})):a.model==="Progress"?(r(),u(f,{key:1,color:"secondary"},{default:e(()=>[l(d(a.model),1)]),_:1})):a.model==="Accepted"?(r(),u(f,{key:2,color:"positive"},{default:e(()=>[l(d(a.model),1)]),_:1})):a.model==="Rejected"?(r(),u(f,{key:3,color:"negative"},{default:e(()=>[l(d(a.model),1)]),_:1})):(r(),u(f,{key:4,color:"primary"},{default:e(()=>[Ce]),_:1}))]),_:1})]),_:1}),t(de),t(y,null,{default:e(()=>[t(c,{avatar:""},{default:e(()=>[t(n,null,{default:e(()=>[t(Q,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm"},{default:e(()=>[Ee]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[l(d(a.specificstartDate),1)]),_:1})]),_:1})]),_:1}),t(y,null,{default:e(()=>[t(c,{avatar:""},{default:e(()=>[t(n,null,{default:e(()=>[t(Q,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm"},{default:e(()=>[Me]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[l(d(a.specificendDate),1)]),_:1})]),_:1})]),_:1}),t(y,null,{default:e(()=>[t(c,{avatar:""},{default:e(()=>[t(n,null,{default:e(()=>[t(Q,{color:"primary",name:"lens"})]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm"},{default:e(()=>[qe]),_:1})]),_:1}),t(c,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm flex-center text-left"},{default:e(()=>[l(d(a.specificeDescription),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(ie,null,{default:e(()=>[t(ne,{filled:"",modelValue:a.model,"onUpdate:modelValue":[s[3]||(s[3]=o=>a.model=o),s[4]||(s[4]=o=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1}),t(ce,{align:"right"},{default:e(()=>[oe(t(le,{flat:"",label:"Close",color:"negative"},null,512),[[fe]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var ct=ee(he,[["render",Pe],["__scopeId","data-v-5575f4ea"]]);export{ct as default};
