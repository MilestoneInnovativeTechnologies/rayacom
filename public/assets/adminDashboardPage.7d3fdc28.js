import{a as Z,Q as $}from"./QToolbar.692181af.js";import{a8 as tt,B as et,k as v,r as f,E as c,H as t,C as r,N as q,G as e,D as V,P as Y,t as E,ap as R,I as o,J as s,K as T,F as U,M as at,aq as lt}from"./index.8d7e61fd.js";import{a as _,Q as i}from"./QItem.d2090226.js";import{Q as d}from"./QItemLabel.4b045cb7.js";import{Q as n}from"./QBadge.68cbc97a.js";import{Q as L}from"./QList.5e2b7bfb.js";import{Q as ot}from"./QPagination.2286f097.js";import{Q as F}from"./QSeparator.1fdea069.js";import{Q as st}from"./QSelect.a4017f62.js";import{Q as rt}from"./QCardActions.dacc32d4.js";import{Q as dt}from"./QCard.9e71421a.js";import{Q as ct}from"./QDialog.500a4fb3.js";import{Q as it}from"./QPage.12dd21c8.js";import{C as mt}from"./ClosePopup.77ae0838.js";import{u as nt}from"./use-quasar.7d209305.js";import{u as ut}from"./order.2c304010.js";import{d as ft}from"./date.52e73b47.js";import{post as _t}from"./axios.980293f3.js";import"./use-dark.678b0dd2.js";import"./QInput.0fdaf5de.js";import"./format.c860d4da.js";import"./QMenu.f3a6a76b.js";import"./position-engine.fd7b7ee1.js";import"./selection.4ec6e38e.js";import"./use-portal.0314865a.js";import"./scroll.25b4c155.js";import"./use-model-toggle.3fd02ce3.js";import"./use-prevent-scroll.1269f3f5.js";import"./master.58f94054.js";import"./lodash.1b69ab06.js";const pt=ut(),gt={setup(){const D=et(),u=nt();let h,a,y;const p=v(()=>pt.all),l=v(()=>{let m=[];for(let x in p.value)h=p.value[x].status,h!="Delivered"&&h!="Cancelled"&&m.push(p.value[x]);return m.reverse()}),g=v(()=>Object.keys(l.value).length);let w,C,Q=f(null);const K=v(()=>(a=(A.value-1)*k.value,y=a+k.value,w=Object.values(l.value).slice(a,y),C=w.map(m=>(m.status,{id:m.id,date:ft.formatDate(m.date,"MMMM d, YYYY "),narration:m.narration,customer:m.customer.name,status:m.status,items:m.items})),C)),j=function(){D.push({name:"ITEM"})},G=function(){_t("order","status",{order:b.value,status:Q.value}).then(console.log),O("Order status updated Successfully")};let S=f(!1),I=f(""),P=f(""),b=f(""),M=f(""),N=f("");const H=function(m,x,W,X,B){console.log(B),P.value=m,b.value=x,I.value=B,M.value=W,N.value=Q.value=X,S.value=!0},O=function(m){u.notify({type:"positive",message:m,icon:"cloud_done",position:"top-right",timeout:2e3})};let A=f(1),J=f(1);const k=f(5),z=v(()=>Math.ceil(g.value/k.value));return{ORDERS:p,MYORDERS:l,totalcount:g,page:A,currentPage:J,totalPages:k,maxVal:z,getOrders:K,gotoItempage:j,showitems:H,specificItems:I,specificId:b,specificCustomer:P,specificDate:M,specificStatus:N,card:S,model:Q,options:["New","Viewed","Accepted","Packed","Dispatched","Delivered","Cancelled"],updateStatus:G,positivemsg:O}}},vt={class:"q-pa-md"},ht=o("Dashboard"),kt=o("Unknown"),xt={key:0,class:"q-pa-lg flex flex-center"},yt={class:"q-pa-md q-gutter-sm"},wt={class:"text-weight-bold"},Qt=o("Unknown"),bt=o("#"),qt=o("Item"),Vt=o("Quantity"),Dt=o("Total Items");function Ct(D,u,h,a,y,p){return r(),c(it,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:t(()=>[q("div",vt,[e($,{class:"bg-brand text-white shadow-2"},{default:t(()=>[e(Z,null,{default:t(()=>[ht]),_:1})]),_:1}),a.totalcount?(r(),c(L,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{"max-width":"350px"}},{default:t(()=>[(r(!0),V(T,null,Y(a.getOrders,(l,g)=>E((r(),c(_,{clickable:"",key:l.id,onClick:w=>a.showitems(l.customer,l.id,l.date,l.status,l.items)},{default:t(()=>[e(i,{avatar:"",top:""},{default:t(()=>[e(R,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(i,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[o(s(l.customer),1)]),_:2},1024),e(d,{lines:"1"},{default:t(()=>[o(s(l.id),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[o(s(l.date),1)]),_:2},1024),e(d,{caption:""},{default:t(()=>[o(s(l.narration),1)]),_:2},1024)]),_:2},1024),e(i,{side:"",top:""},{default:t(()=>[l.status==="New"?(r(),c(n,{key:0,color:"blue"},{default:t(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Viewed"?(r(),c(n,{key:1,color:"secondary"},{default:t(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Accepted"?(r(),c(n,{key:2,color:"accent"},{default:t(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Packed"?(r(),c(n,{key:3,color:"info"},{default:t(()=>[o(s(l.status),1)]),_:2},1024)):l.status==="Dispatched"?(r(),c(n,{key:4,color:"blue-grey"},{default:t(()=>[o(s(l.status),1)]),_:2},1024)):(r(),c(n,{key:5,color:"primary"},{default:t(()=>[kt]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[lt]])),128))]),_:1})):U("",!0)]),a.totalcount?(r(),V("div",xt,[e(ot,{modelValue:a.page,"onUpdate:modelValue":u[0]||(u[0]=l=>a.page=l),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):U("",!0),q("div",yt,[e(ct,{modelValue:a.card,"onUpdate:modelValue":u[3]||(u[3]=l=>a.card=l)},{default:t(()=>[e(dt,{class:"my-card",style:{width:"400px"}},{default:t(()=>[e(L,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:t(()=>[e(_,null,{default:t(()=>[e(i,{avatar:""},{default:t(()=>[e(R,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),e(i,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[o(s(a.specificCustomer),1)]),_:1}),e(d,{lines:"2"},{default:t(()=>[o(s(a.specificDate),1)]),_:1}),e(d,{caption:"",lines:"3"},{default:t(()=>[q("span",wt,s(a.specificId),1)]),_:1})]),_:1}),e(i,{side:""},{default:t(()=>[a.model==="New"?(r(),c(n,{key:0,color:"blue"},{default:t(()=>[o(s(a.model),1)]),_:1})):a.model==="Viewed"?(r(),c(n,{key:1,color:"secondary"},{default:t(()=>[o(s(a.model),1)]),_:1})):a.model==="Accepted"?(r(),c(n,{key:2,color:"accent"},{default:t(()=>[o(s(a.model),1)]),_:1})):a.model==="Packed"?(r(),c(n,{key:3,color:"info"},{default:t(()=>[o(s(a.model),1)]),_:1})):a.model==="Dispatched"?(r(),c(n,{key:4,color:"blue-grey"},{default:t(()=>[o(s(a.model),1)]),_:1})):a.model==="Delivered"?(r(),c(n,{key:5,color:"positive"},{default:t(()=>[o(s(a.model),1)]),_:1})):a.model==="Cancelled"?(r(),c(n,{key:6,color:"negative"},{default:t(()=>[o(s(a.model),1)]),_:1})):(r(),c(n,{key:7,color:"primary"},{default:t(()=>[Qt]),_:1}))]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(i,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[bt]),_:1})]),_:1}),e(i,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[qt]),_:1})]),_:1}),e(i,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[Vt]),_:1})]),_:1})]),_:1}),e(F),(r(!0),V(T,null,Y(a.specificItems,(l,g)=>(r(),c(_,null,{default:t(()=>[e(i,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm"},{default:t(()=>[o(s(g+1),1)]),_:2},1024)]),_:2},1024),e(i,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm"},{default:t(()=>[o(s(l.item.name),1)]),_:2},1024)]),_:2},1024),e(i,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm flex-center text-center"},{default:t(()=>[o(s(l.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),e(F),e(_,null,{default:t(()=>[e(i,{top:"",class:"col-1 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),e(i,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[Dt]),_:1})]),_:1}),e(i,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium text-center"},{default:t(()=>[o(s(a.specificItems.length),1)]),_:1})]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(i,{top:"",class:"col-2 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"})]),_:1}),e(i,{top:"",class:"col-7 gt-sm"},{default:t(()=>[e(d,{class:"q-mt-sm text-weight-medium"},{default:t(()=>[e(st,{filled:"",modelValue:a.model,"onUpdate:modelValue":[u[1]||(u[1]=l=>a.model=l),u[2]||(u[2]=l=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1})]),_:1}),e(i,{top:""},{default:t(()=>[e(d,{class:"q-mt-sm"})]),_:1})]),_:1})]),_:1}),e(rt,{align:"right"},{default:t(()=>[E(e(at,{flat:"",label:"Close",color:"negative"},null,512),[[mt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var se=tt(gt,[["render",Ct]]);export{se as default};
