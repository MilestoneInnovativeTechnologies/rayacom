import{aj as ue,K as ie,t as f,r as p,N as u,R as e,L as n,Z as V,P as t,S as w,T as l,U as s,ai as g,Y as E,O as b,M as q,V as W,$ as K,B as F,as as Z,Q as G,am as me,at as fe,au as _e}from"./index.101a966c.js";import{a as _,Q as r}from"./QItem.dce1150f.js";import{Q as c}from"./QItemLabel.13a2a6fe.js";import{Q as v}from"./QList.f8486a5f.js";import{Q as i}from"./QBadge.edff4c29.js";import{a as pe,Q as ve}from"./QToolbar.919471eb.js";import{Q as ge}from"./QPagination.5cea30fa.js";import{Q as he}from"./QSelect.2130f75c.js";import{Q as we}from"./QPage.e63dd143.js";import{C as be}from"./ClosePopup.319aeed0.js";import{u as xe}from"./use-quasar.9bf5be9e.js";import{u as ye}from"./order.9f0eeb79.js";import{u as ke}from"./leave.81930c78.js";import{u as Qe}from"./review.d1286e93.js";import{d as Ce}from"./date.71b149c5.js";import{post as Ve}from"./axios.74e28b8f.js";import"./QMenu.61143803.js";import"./position-engine.b702d09b.js";import"./selection.f5e64e4d.js";import"./master.027e8a10.js";import"./lodash.1e9e3f94.js";const h=ye(),qe=ke(),Se=Qe(),De={setup(){const S=ie(),m=xe();let x,a;const y=f(()=>Object.values(h.all).filter(d=>d.status!="Delivered"&&d.status!="Cancelled").reverse()),D=f(()=>Object.keys(y.value).length),o=f(()=>Object.values(h.all).filter(d=>d.status=="New").length),k=f(()=>Object.values(h.all).filter(d=>d.status=="Viewed").length),P=f(()=>Object.values(h.all).filter(d=>d.status=="Accepted").length),H=f(()=>Object.values(h.all).filter(d=>d.status=="Packed").length),J=f(()=>Object.values(h.all).filter(d=>d.status=="Dispatched").length),X=function(){S.push({name:"LEAVES"})},$=f(()=>Object.values(Se.reviews).filter(d=>d.status=="New")),ee=f(()=>Object.values(qe.leaves).filter(d=>d.status=="New")),te=f(()=>$.value.length),ae=f(()=>ee.value.length),le=function(){S.push({name:"REVIEWS"})};let N,R,Q=p(null);const oe=f(()=>(x=(T.value-1)*C.value,a=x+C.value,N=Object.values(y.value).slice(x,a),R=N.map(d=>(d.status,{id:d.id,date:Ce.formatDate(d.date,"MMMM D, YYYY "),narration:d.narration,customer:d.customer.name,status:d.status,items:d.items})),R)),A=function(){Ve("order","status",{order:O.value,status:Q.value}).then(console.log),B("Order status updated Successfully")};let j=p(!1),L=p(""),M=p(""),O=p(""),Y=p(""),I=p("");const se=function(d,ce,ne,U,z){console.log(z),M.value=d,O.value=ce,L.value=z,Y.value=ne,U=="New"?(I.value=Q.value="VIEWED",A()):I.value=Q.value=U,j.value=!0},B=function(d){m.notify({type:"positive",message:d,icon:"cloud_done",position:"top-right",timeout:1e3})};let T=p(1),de=p(1);const C=p(5),re=f(()=>Math.ceil(D.value/C.value));return{MYORDERS:y,newCount:o,viewedCount:k,acceptedCount:P,packedCount:H,dispatchedCount:J,totalcount:D,leavecount:ae,reviewcount:te,page:T,currentPage:de,totalPages:C,maxVal:re,getOrders:oe,showitems:se,specificItems:L,specificId:O,specificCustomer:M,specificDate:Y,specificStatus:I,card:j,model:Q,options:["Accepted","Packed","Dispatched","Delivered","Cancelled"],updateStatus:A,positivemsg:B,gotoLeave:X,gotoReview:le}}},Oe={class:"q-pa-md row items-start q-gutter-md"},Ie=l("New"),Ee=l("Viewed"),Pe=l("Accepted"),Ne=l("Packed"),Re=l("Dispatched"),Ae={class:"q-pa-md q-gutter-sm"},je={key:0,class:"q-pa-md"},Le=l("ORDERS"),Me=l("Unknown"),Ye={key:0,class:"q-pa-lg flex flex-center"},Be={class:"q-pa-md q-gutter-sm"},Te={class:"text-weight-bold"},Ue=l("Unknown"),ze=l("#"),We=l("Item"),Ke=l("Quantity"),Fe=l("Total Items");function Ze(S,m,x,a,y,D){return n(),u(we,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:e(()=>[V("div",Oe,[t(g,{class:"my-card text-white",style:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)",width:"80vw"}},{default:e(()=>[t(v,null,{default:e(()=>[t(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"local_bar",size:"md"})]),_:1}),t(r,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(s(a.newCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Ie]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, #f5b38b 0%, rgb(162,66,6) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"travel_explore",size:"md"})]),_:1}),t(r,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(s(a.viewedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Ee]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, #ee9bfa 0%, rgb(83,2,94) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"done_all",size:"md"})]),_:1}),t(r,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(s(a.acceptedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Pe]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, rgba(248,232,54,0.93) 0%, rgba(103,95,8,0.93) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"work",size:"md"})]),_:1}),t(r,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(s(a.packedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Ne]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, #86f6ed 0%, #046558 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(_,{clickable:""},{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"local_shipping",size:"md"})]),_:1}),t(r,null,{default:e(()=>[t(c,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(s(a.dispatchedCount),1)]),_:1}),t(c,{caption:""},{default:e(()=>[Re]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),V("div",Ae,[a.leavecount?(n(),u(E,{key:0,color:"white","text-color":"primary","icon-right":"sick",label:"LEAVES",onClick:m[0]||(m[0]=o=>a.gotoLeave())},{default:e(()=>[t(i,{color:"positive",floating:"",transparent:""},{default:e(()=>[l(s(a.leavecount),1)]),_:1})]),_:1})):b("",!0),a.reviewcount?(n(),u(E,{key:1,color:"white","text-color":"primary","icon-right":"comment_bank",label:"REVIEWS",onClick:m[1]||(m[1]=o=>a.gotoReview())},{default:e(()=>[t(i,{color:"accent",floating:"",transparent:""},{default:e(()=>[l(s(a.reviewcount),1)]),_:1})]),_:1})):b("",!0)]),a.totalcount?(n(),q("div",je,[t(ve,{class:"bg-brand text-white shadow-2"},{default:e(()=>[t(pe,null,{default:e(()=>[Le]),_:1})]),_:1}),a.totalcount?(n(),u(v,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{width:"80vw","max-width":"350px"}},{default:e(()=>[(n(!0),q(W,null,K(a.getOrders,(o,k)=>F((n(),u(_,{clickable:"",key:o.id,onClick:P=>a.showitems(o.customer,o.id,o.date,o.status,o.items)},{default:e(()=>[t(r,{avatar:"",top:""},{default:e(()=>[t(Z,{color:"brand","text-color":"white"},{default:e(()=>[l(s(o.customer.charAt(0)),1)]),_:2},1024)]),_:2},1024),t(r,null,{default:e(()=>[t(c,{lines:"1"},{default:e(()=>[l(s(o.customer),1)]),_:2},1024),t(c,{caption:""},{default:e(()=>[l(s(o.date),1)]),_:2},1024),t(c,{caption:""},{default:e(()=>[l(s(o.narration),1)]),_:2},1024)]),_:2},1024),t(r,{side:"",top:""},{default:e(()=>[o.status==="New"?(n(),u(i,{key:0,color:"blue"},{default:e(()=>[l(s(o.status),1)]),_:2},1024)):o.status==="Viewed"?(n(),u(i,{key:1,color:"secondary"},{default:e(()=>[l(s(o.status),1)]),_:2},1024)):o.status==="Accepted"?(n(),u(i,{key:2,color:"accent"},{default:e(()=>[l(s(o.status),1)]),_:2},1024)):o.status==="Packed"?(n(),u(i,{key:3,color:"info"},{default:e(()=>[l(s(o.status),1)]),_:2},1024)):o.status==="Dispatched"?(n(),u(i,{key:4,color:"blue-grey"},{default:e(()=>[l(s(o.status),1)]),_:2},1024)):(n(),u(i,{key:5,color:"primary"},{default:e(()=>[Me]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[_e]])),128)),a.totalcount?(n(),q("div",Ye,[t(ge,{modelValue:a.page,"onUpdate:modelValue":m[2]||(m[2]=o=>a.page=o),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):b("",!0)]),_:1})):b("",!0)])):b("",!0),V("div",Be,[t(fe,{modelValue:a.card,"onUpdate:modelValue":m[5]||(m[5]=o=>a.card=o)},{default:e(()=>[t(g,{style:{width:"400px"}},{default:e(()=>[t(v,{bordered:"",class:"rounded-borders",style:{"min-width":"350px"}},{default:e(()=>[t(_,null,{default:e(()=>[t(r,{avatar:""},{default:e(()=>[t(Z,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(c,{lines:"1"},{default:e(()=>[l(s(a.specificCustomer),1)]),_:1}),t(c,{lines:"2"},{default:e(()=>[l(s(a.specificDate),1)]),_:1}),t(c,{caption:"",lines:"3"},{default:e(()=>[V("span",Te,s(a.specificId),1)]),_:1})]),_:1}),t(r,{side:""},{default:e(()=>[a.model==="New"?(n(),u(i,{key:0,color:"blue"},{default:e(()=>[l(s(a.model),1)]),_:1})):a.model==="Viewed"?(n(),u(i,{key:1,color:"secondary"},{default:e(()=>[l(s(a.model),1)]),_:1})):a.model==="Accepted"?(n(),u(i,{key:2,color:"accent"},{default:e(()=>[l(s(a.model),1)]),_:1})):a.model==="Packed"?(n(),u(i,{key:3,color:"info"},{default:e(()=>[l(s(a.model),1)]),_:1})):a.model==="Dispatched"?(n(),u(i,{key:4,color:"blue-grey"},{default:e(()=>[l(s(a.model),1)]),_:1})):a.model==="Delivered"?(n(),u(i,{key:5,color:"positive"},{default:e(()=>[l(s(a.model),1)]),_:1})):a.model==="Cancelled"?(n(),u(i,{key:6,color:"negative"},{default:e(()=>[l(s(a.model),1)]),_:1})):(n(),u(i,{key:7,color:"primary"},{default:e(()=>[Ue]),_:1}))]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[ze]),_:1})]),_:1}),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[We]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[Ke]),_:1})]),_:1})]),_:1}),t(G),(n(!0),q(W,null,K(a.specificItems,(o,k)=>(n(),u(_,null,{default:e(()=>[t(r,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm"},{default:e(()=>[l(s(k+1),1)]),_:2},1024)]),_:2},1024),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm"},{default:e(()=>[l(s(o.item.name),1)]),_:2},1024)]),_:2},1024),t(r,{top:""},{default:e(()=>[t(c,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[l(s(o.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),t(G),t(_,null,{default:e(()=>[t(r,{top:"",class:"col-1 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[Fe]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium text-center"},{default:e(()=>[l(s(a.specificItems.length),1)]),_:1})]),_:1})]),_:1}),t(_,null,{default:e(()=>[t(r,{top:"",class:"col-2 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium"})]),_:1}),t(r,{top:"",class:"col-7 gt-sm"},{default:e(()=>[t(c,{class:"q-mt-sm text-weight-medium"},{default:e(()=>[t(he,{filled:"",modelValue:a.model,"onUpdate:modelValue":[m[3]||(m[3]=o=>a.model=o),m[4]||(m[4]=o=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1})]),_:1}),t(r,{top:""},{default:e(()=>[t(c,{class:"q-mt-sm"})]),_:1})]),_:1})]),_:1}),t(me,{align:"right"},{default:e(()=>[F(t(E,{flat:"",label:"Close",color:"negative"},null,512),[[be]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var vt=ue(De,[["render",Ze],["__scopeId","data-v-14596bbf"]]);export{vt as default};
