import{Q as d}from"./QItemLabel.13a2a6fe.js";import{a as c,Q as l}from"./QItem.dce1150f.js";import{aj as N,aD as O,K as q,r as f,N as y,R as t,L as p,P as e,M as P,$ as A,T as u,U as v,al as h,S as U,V as Y,Q as V,Y as x,O as L,ai as M,ah as R,as as H,am as T,B as C,at as j,Z as E}from"./index.101a966c.js";import{Q as F}from"./QList.f8486a5f.js";import{Q as J}from"./QPage.e63dd143.js";import{C as S}from"./ClosePopup.319aeed0.js";import{d as K}from"./date.71b149c5.js";import{u as Z}from"./use-quasar.9bf5be9e.js";import{u as z}from"./order.9f0eeb79.js";import{post as G}from"./axios.74e28b8f.js";import"./master.027e8a10.js";import"./lodash.1e9e3f94.js";z();const W={setup(w){const s=Z(),g=O(),a=q(),m=f(JSON.parse(g.params.myproducts)),_=f(""),r=function(){var i=o.value;m.value.splice(i,1),n.value=!1},n=f(!1),o=f(null),D=function(i){n.value=!0,o.value=i};let Q,b;const I=function(){Q=Date.now(),b=K.formatDate(Q,"YYYY-MM-DD HH:mm:ss");var i=m.value.some(function(B){return B.quantity===0});i||(G("order","store",{date:b,narration:_.value,items:m.value}),m.length=0,k("Order saved Successfully"),a.push({name:"DASHBOARD"}))},k=function(i){s.notify({type:"positive",message:i,icon:"cloud_done",position:"top-right",timeout:1e3})};return{myproducts:m,removeItem:r,confirm:n,confirmBox:D,confirmOrder:I,notes:_,positivemsg:k}}},X=u("#"),$=u("Item"),ee=u("Quantity"),te=u("Total Items:"),ae=u("Notes"),le=E("span",{class:"q-ml-sm"},"Are you sure you want to delete?",-1);function oe(w,s,g,a,m,_){return p(),y(J,{padding:"",class:"flex flex-center column q-gutter-y-xl"},{default:t(()=>[e(F,{bordered:""},{default:t(()=>[e(c,{clickable:"",class:"text-subtitle2 bg-deep-orange-10 text-white"},{default:t(()=>[e(l,{class:"text-white"},{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[X]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[$]),_:1})]),_:1}),e(l,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[ee]),_:1})]),_:1}),e(l,{class:"text-white",side:""})]),_:1}),(p(!0),P(Y,null,A(a.myproducts,(r,n)=>(p(),y(c,{clickable:"",key:r.id},{default:t(()=>[e(l,{class:"text-black",side:""},{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[u(v(n+1),1)]),_:2},1024)]),_:2},1024),e(l,null,{default:t(()=>[e(d,{lines:"1"},{default:t(()=>[u(v(r.itemname),1)]),_:2},1024)]),_:2},1024),e(l,{side:"",top:""},{default:t(()=>[e(h,{outlined:"",dense:"",maxlength:"4",style:{"max-width":"60px"},modelValue:a.myproducts[n].quantity,"onUpdate:modelValue":o=>a.myproducts[n].quantity=o,modelModifiers:{number:!0},mask:"#","fill-mask":"0","reverse-fill-mask":"",rules:[o=>o!==null&&o!==""&&parseInt(o)!=NaN||"Please type a number",o=>o>0||"Please type a real number"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(l,{avatar:"",side:"",top:""},{default:t(()=>[e(U,{name:"cancel",onClick:o=>a.confirmBox(n),class:"cursor-pointer"},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),e(V),e(c,{clickable:"",class:"text-subtitle2"},{default:t(()=>[e(l,null,{default:t(()=>[te]),_:1}),e(l,null,{default:t(()=>[u(v(a.myproducts.length),1)]),_:1})]),_:1}),e(V),e(c,{clickable:"",class:"text-subtitle2"},{default:t(()=>[e(l,null,{default:t(()=>[ae]),_:1}),e(l,null,{default:t(()=>[e(h,{outlined:"",modelValue:a.notes,"onUpdate:modelValue":s[0]||(s[0]=r=>a.notes=r),type:"text",maxlength:"500",autogrow:"",counter:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a.myproducts.length?(p(),y(x,{key:0,color:"positive",label:"Save",type:"submit",icon:"camera_enhance",onClick:s[1]||(s[1]=r=>a.confirmOrder())})):L("",!0),e(j,{modelValue:a.confirm,"onUpdate:modelValue":s[3]||(s[3]=r=>a.confirm=r),persistent:""},{default:t(()=>[e(M,null,{default:t(()=>[e(R,{class:"row items-center"},{default:t(()=>[e(H,{icon:"delete",color:"primary","text-color":"white"}),le]),_:1}),e(T,{align:"right"},{default:t(()=>[C(e(x,{flat:"",label:"Cancel",color:"primary"},null,512),[[S]]),C(e(x,{flat:"",label:"Delete",color:"primary",onClick:s[2]||(s[2]=r=>a.removeItem())},null,512),[[S]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ve=N(W,[["render",oe]]);export{ve as default};
