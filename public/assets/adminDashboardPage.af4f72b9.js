import{ai as ce,J as ie,t as m,r as _,M as c,P as e,K as u,Y as S,O as t,R as w,S as l,T as r,ah as g,X as P,N as h,L as V,U as W,_ as K,B as F,as as J,Q as X,ag as fe,al as me,at as _e,au as pe}from"./index.8ca15aea.js";import{a as p,Q as s}from"./QItem.444016e9.js";import{Q as n}from"./QItemLabel.5771a04c.js";import{Q as v}from"./QList.428a5f0b.js";import{Q as i}from"./QBadge.e3c4b0f0.js";import{a as ve,Q as ge}from"./QToolbar.f6252fc7.js";import{Q as be}from"./QPagination.5d576056.js";import{Q as we}from"./QSelect.f9d8d8a5.js";import{Q as he}from"./QPage.a0c24181.js";import{C as ke}from"./ClosePopup.555721be.js";import{u as ye}from"./use-quasar.c67c6e3f.js";import{u as xe}from"./order.0741cb5a.js";import{u as Qe}from"./leave.c094466b.js";import{u as Ce}from"./review.49239f13.js";import{d as Se}from"./date.19ebf348.js";import{post as Ve}from"./axios.871de128.js";import"./format.c860d4da.js";import"./QMenu.057dbcb4.js";import"./position-engine.39984fe0.js";import"./selection.14432526.js";import"./master.e3dfadde.js";import"./lodash.1e9e3f94.js";const b=xe(),De=Qe(),Oe=Ce(),Ie={setup(){const D=ie(),f=ye();let k,a;const y=m(()=>Object.values(b.all).filter(d=>d.status!="Delivered"&&d.status!="Cancelled").reverse()),O=m(()=>Object.keys(y.value).length),o=m(()=>Object.values(b.all).filter(d=>d.status=="New").length),x=m(()=>Object.values(b.all).filter(d=>d.status=="Viewed").length),q=m(()=>Object.values(b.all).filter(d=>d.status=="Accepted").length),G=m(()=>Object.values(b.all).filter(d=>d.status=="Packed").length),H=m(()=>Object.values(b.all).filter(d=>d.status=="Dispatched").length),Z=function(){D.push({name:"LEAVES"})},$=m(()=>Object.values(Oe.reviews).filter(d=>d.status=="New")),ee=m(()=>Object.values(De.leaves).filter(d=>d.status=="New")),te=m(()=>$.value.length),ae=m(()=>ee.value.length),le=function(){D.push({name:"REVIEWS"})};let N,R,Q=_(null);const oe=m(()=>(k=(T.value-1)*C.value,a=k+C.value,N=Object.values(y.value).slice(k,a),R=N.map(d=>(d.status,{id:d.id,date:Se.formatDate(d.date,"MMMM D, YYYY "),narration:d.narration,customer:d.customer.name,status:d.status,items:d.items})),R)),A=function(){Ve("order","status",{order:I.value,status:Q.value}).then(console.log),B("Order status updated Successfully")};let j=_(!1),L=_(""),M=_(""),I=_(""),Y=_(""),E=_("");const re=function(d,ne,ue,U,z){console.log(z),M.value=d,I.value=ne,L.value=z,Y.value=ue,U=="New"?(E.value=Q.value="VIEWED",A()):E.value=Q.value=U,j.value=!0},B=function(d){f.notify({type:"positive",message:d,icon:"cloud_done",position:"top-right",timeout:1e3})};let T=_(1),de=_(1);const C=_(5),se=m(()=>Math.ceil(O.value/C.value));return{MYORDERS:y,newCount:o,viewedCount:x,acceptedCount:q,packedCount:G,dispatchedCount:H,totalcount:O,leavecount:ae,reviewcount:te,page:T,currentPage:de,totalPages:C,maxVal:se,getOrders:oe,showitems:re,specificItems:L,specificId:I,specificCustomer:M,specificDate:Y,specificStatus:E,card:j,model:Q,options:["Accepted","Packed","Dispatched","Delivered","Cancelled"],updateStatus:A,positivemsg:B,gotoLeave:Z,gotoReview:le}}},Ee={class:"q-pa-md row items-start q-gutter-md"},Pe={class:"q-pa-md q-gutter-sm"},qe={key:0,class:"q-pa-md"},Ne={key:0,class:"q-pa-lg flex flex-center"},Re={class:"q-pa-md q-gutter-sm"},Ae={class:"text-weight-bold"};function je(D,f,k,a,y,O){return u(),c(he,{padding:"",class:"flex flex-center column q-gutter-y-sm"},{default:e(()=>[S("div",Ee,[t(g,{class:"my-card text-white",style:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)",width:"80vw"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"local_bar",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(n,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.newCount),1)]),_:1}),t(n,{caption:""},{default:e(()=>[l("New")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, #f5b38b 0%, rgb(162,66,6) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"travel_explore",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(n,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.viewedCount),1)]),_:1}),t(n,{caption:""},{default:e(()=>[l("Viewed")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, #ee9bfa 0%, rgb(83,2,94) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"done_all",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(n,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.acceptedCount),1)]),_:1}),t(n,{caption:""},{default:e(()=>[l("Accepted")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, rgba(248,232,54,0.93) 0%, rgba(103,95,8,0.93) 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"work",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(n,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.packedCount),1)]),_:1}),t(n,{caption:""},{default:e(()=>[l("Packed")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(g,{class:"my-card",style:{background:"radial-gradient(circle, #86f6ed 0%, #046558 100%)"}},{default:e(()=>[t(v,null,{default:e(()=>[t(p,{clickable:""},{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(w,{color:"primary",name:"local_shipping",size:"md"})]),_:1}),t(s,null,{default:e(()=>[t(n,{class:"text-h5 text-bold text-white"},{default:e(()=>[l(r(a.dispatchedCount),1)]),_:1}),t(n,{caption:""},{default:e(()=>[l("Dispatched")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),S("div",Pe,[a.leavecount?(u(),c(P,{key:0,color:"white","text-color":"primary","icon-right":"sick",label:"LEAVES",onClick:f[0]||(f[0]=o=>a.gotoLeave())},{default:e(()=>[t(i,{color:"positive",floating:"",transparent:""},{default:e(()=>[l(r(a.leavecount),1)]),_:1})]),_:1})):h("",!0),a.reviewcount?(u(),c(P,{key:1,color:"white","text-color":"primary","icon-right":"comment_bank",label:"REVIEWS",onClick:f[1]||(f[1]=o=>a.gotoReview())},{default:e(()=>[t(i,{color:"accent",floating:"",transparent:""},{default:e(()=>[l(r(a.reviewcount),1)]),_:1})]),_:1})):h("",!0)]),a.totalcount?(u(),V("div",qe,[t(ge,{class:"bg-brand text-white shadow-2"},{default:e(()=>[t(ve,null,{default:e(()=>[l("ORDERS")]),_:1})]),_:1}),a.totalcount?(u(),c(v,{key:0,bordered:"",padding:"",class:"rounded-borders",style:{width:"80vw","max-width":"350px"}},{default:e(()=>[(u(!0),V(W,null,K(a.getOrders,(o,x)=>F((u(),c(p,{clickable:"",key:o.id,onClick:q=>a.showitems(o.customer,o.id,o.date,o.status,o.items)},{default:e(()=>[t(s,{avatar:"",top:""},{default:e(()=>[t(J,{color:"brand","text-color":"white"},{default:e(()=>[l(r(o.customer.charAt(0)),1)]),_:2},1024)]),_:2},1024),t(s,null,{default:e(()=>[t(n,{lines:"1"},{default:e(()=>[l(r(o.customer),1)]),_:2},1024),t(n,{caption:""},{default:e(()=>[l(r(o.date),1)]),_:2},1024),t(n,{caption:""},{default:e(()=>[l(r(o.narration),1)]),_:2},1024)]),_:2},1024),t(s,{side:"",top:""},{default:e(()=>[o.status==="New"?(u(),c(i,{key:0,color:"blue"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Viewed"?(u(),c(i,{key:1,color:"secondary"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Accepted"?(u(),c(i,{key:2,color:"accent"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Packed"?(u(),c(i,{key:3,color:"info"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):o.status==="Dispatched"?(u(),c(i,{key:4,color:"blue-grey"},{default:e(()=>[l(r(o.status),1)]),_:2},1024)):(u(),c(i,{key:5,color:"primary"},{default:e(()=>[l("Unknown")]),_:1}))]),_:2},1024)]),_:2},1032,["onClick"])),[[pe]])),128)),a.totalcount?(u(),V("div",Ne,[t(be,{modelValue:a.page,"onUpdate:modelValue":f[2]||(f[2]=o=>a.page=o),min:a.currentPage,max:a.maxVal,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward","active-color":"brand"},null,8,["modelValue","min","max"])])):h("",!0)]),_:1})):h("",!0)])):h("",!0),S("div",Re,[t(_e,{modelValue:a.card,"onUpdate:modelValue":f[5]||(f[5]=o=>a.card=o)},{default:e(()=>[t(g,{style:{"min-width":"400px"}},{default:e(()=>[t(v,{bordered:"",class:"rounded-borders"},{default:e(()=>[t(p,null,{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(J,{icon:"fact_check",color:"brand","text-color":"white"})]),_:1}),t(s,{top:""},{default:e(()=>[t(n,{lines:"1"},{default:e(()=>[l(r(a.specificCustomer),1)]),_:1}),t(n,{lines:"2"},{default:e(()=>[l(r(a.specificDate),1)]),_:1}),t(n,{caption:"",lines:"3"},{default:e(()=>[S("span",Ae,r(a.specificId),1)]),_:1})]),_:1}),t(s,{side:""},{default:e(()=>[a.model==="New"?(u(),c(i,{key:0,color:"blue"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Viewed"?(u(),c(i,{key:1,color:"secondary"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Accepted"?(u(),c(i,{key:2,color:"accent"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Packed"?(u(),c(i,{key:3,color:"info"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Dispatched"?(u(),c(i,{key:4,color:"blue-grey"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Delivered"?(u(),c(i,{key:5,color:"positive"},{default:e(()=>[l(r(a.model),1)]),_:1})):a.model==="Cancelled"?(u(),c(i,{key:6,color:"negative"},{default:e(()=>[l(r(a.model),1)]),_:1})):(u(),c(i,{key:7,color:"primary"},{default:e(()=>[l("Unknown")]),_:1}))]),_:1})]),_:1}),t(p,null,{default:e(()=>[t(s,{top:""},{default:e(()=>[t(n,{class:"text-weight-medium"},{default:e(()=>[l("#")]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(n,{class:"text-weight-medium"},{default:e(()=>[l("Item")]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(n,{class:"text-weight-medium text-center"},{default:e(()=>[l("Quantity")]),_:1})]),_:1})]),_:1}),t(X),(u(!0),V(W,null,K(a.specificItems,(o,x)=>(u(),c(p,null,{default:e(()=>[t(s,{avatar:"",top:""},{default:e(()=>[t(n,null,{default:e(()=>[l(r(x+1),1)]),_:2},1024)]),_:2},1024),t(s,{top:""},{default:e(()=>[t(n,null,{default:e(()=>[l(r(o.item.name),1)]),_:2},1024)]),_:2},1024),t(s,{top:""},{default:e(()=>[t(n,{class:"q-mt-sm flex-center text-center"},{default:e(()=>[l(r(o.quantity),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256)),t(X),t(p,null,{default:e(()=>[t(s,{avatar:""},{default:e(()=>[t(n,null,{default:e(()=>[l("\xA0")]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(n,{class:"text-weight-medium"},{default:e(()=>[l("Total Items")]),_:1})]),_:1}),t(s,{top:""},{default:e(()=>[t(n,{class:"text-weight-medium text-center"},{default:e(()=>[l(r(a.specificItems.length),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(fe,null,{default:e(()=>[t(we,{filled:"",modelValue:a.model,"onUpdate:modelValue":[f[3]||(f[3]=o=>a.model=o),f[4]||(f[4]=o=>a.updateStatus())],options:a.options,label:"Status"},null,8,["modelValue","options"])]),_:1}),t(me,{align:"right"},{default:e(()=>[F(t(P,{flat:"",label:"Close",color:"negative"},null,512),[[ke]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}var dt=ce(Ie,[["render",je],["__scopeId","data-v-47c3902a"]]);export{dt as default};
